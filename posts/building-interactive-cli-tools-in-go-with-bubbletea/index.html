<!doctype html><html lang=en><head><title>Building Interactive CLI Tools in Go with Bubbletea :: Git Push and Run</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Building Interactive CLI Tools in Go with Bubbletea If you&rsquo;ve ever wanted to build a terminal application that feels more like a proper UI than a wall of text, the charmbracelet ecosystem is the way to go. I&rsquo;ve been using it to build internal DevOps tools, and the developer experience is excellent. In this post, I&rsquo;ll walk through building an interactive CLI tool using Bubbletea and Huh, the same libraries behind tools like gum and soft-serve.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://manuelfedele.github.io/posts/building-interactive-cli-tools-in-go-with-bubbletea/><script async src="https://www.googletagmanager.com/gtag/js?id=G-K9P1DJX238"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K9P1DJX238")}</script><link rel=stylesheet href=https://manuelfedele.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://manuelfedele.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://manuelfedele.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://manuelfedele.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://manuelfedele.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://manuelfedele.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://manuelfedele.github.io/css/main.min.775ac2af004d44c22a6d000fbd1d9af529642f5cef27399d0280d180af2c2e9b.css><link rel=stylesheet href=https://manuelfedele.github.io/css/menu.min.310d32205bdedd6f43144e3c3273c9deecd238eba5f9108db5ea96ca0cfbe377.css><link rel=stylesheet href=https://manuelfedele.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://manuelfedele.github.io/css/post.min.ad50c7f4d00e7975918f37fc74c6029e1959a40d66fb5b2c6564a8715e985573.css><link rel=stylesheet href=https://manuelfedele.github.io/css/syntax.min.e9ab635cf918bc84b901eb65c0b2caa74c9544245e3647c1af5c129896ef276e.css><link rel=stylesheet href=https://manuelfedele.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://manuelfedele.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://manuelfedele.github.io/style.css><link rel="shortcut icon" href=https://manuelfedele.github.io/favicon.png><link rel=apple-touch-icon href=https://manuelfedele.github.io/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Building Interactive CLI Tools in Go with Bubbletea"><meta property="og:description" content="Building Interactive CLI Tools in Go with Bubbletea If you&rsquo;ve ever wanted to build a terminal application that feels more like a proper UI than a wall of text, the charmbracelet ecosystem is the way to go. I&rsquo;ve been using it to build internal DevOps tools, and the developer experience is excellent. In this post, I&rsquo;ll walk through building an interactive CLI tool using Bubbletea and Huh, the same libraries behind tools like gum and soft-serve.
"><meta property="og:url" content="https://manuelfedele.github.io/posts/building-interactive-cli-tools-in-go-with-bubbletea/"><meta property="og:site_name" content="Git Push and Run"><meta property="og:image" content="https://manuelfedele.github.io/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2025-11-14 10:30:00 +0100 +0100"></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>git push && run</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;â–¾</li><li><ul class=menu__dropdown><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://manuelfedele.github.io/posts/building-interactive-cli-tools-in-go-with-bubbletea/>Building Interactive CLI Tools in Go with Bubbletea</a></h1><div class=post-meta><time class=post-date>2025-11-14</time><span class=post-reading-time>6 min read (1230 words)</span></div><span class=post-tags>#<a href=https://manuelfedele.github.io/tags/golang/>golang</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/cli/>cli</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/bubbletea/>bubbletea</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/devops/>devops</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/tui/>tui</a>&nbsp;</span><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#why-build-tui-tools>Why Build TUI Tools?</a></li><li><a href=#the-elm-architecture>The Elm Architecture</a></li><li><a href=#using-huh-for-forms>Using Huh for Forms</a></li><li><a href=#loading-aws-profiles-dynamically>Loading AWS Profiles Dynamically</a></li><li><a href=#running-scans-with-a-spinner>Running Scans with a Spinner</a></li><li><a href=#parallel-scanning-with-goroutines>Parallel Scanning with Goroutines</a></li><li><a href=#rendering-tables-with-lipgloss>Rendering Tables with Lipgloss</a></li><li><a href=#distributing-the-binary>Distributing the Binary</a></li><li><a href=#takeaways>Takeaways</a></li><li><a href=#references>References</a></li></ul></nav></div><div class=post-content><div><h1 id=building-interactive-cli-tools-in-go-with-bubbletea>Building Interactive CLI Tools in Go with Bubbletea<a href=#building-interactive-cli-tools-in-go-with-bubbletea class=hanchor arialabel=Anchor>#</a></h1><p>If you&rsquo;ve ever wanted to build a terminal application that feels more like a proper UI than a wall of text, the <a href=https://github.com/charmbracelet>charmbracelet</a> ecosystem is the way to go. I&rsquo;ve been using it to build internal DevOps tools, and the developer experience is excellent. In this post, I&rsquo;ll walk through building an interactive CLI tool using <a href=https://github.com/charmbracelet/bubbletea>Bubbletea</a> and <a href=https://github.com/charmbracelet/huh>Huh</a>, the same libraries behind tools like <code>gum</code> and <code>soft-serve</code>.</p><h2 id=why-build-tui-tools>Why Build TUI Tools?<a href=#why-build-tui-tools class=hanchor arialabel=Anchor>#</a></h2><p>As a platform engineer, I spend a lot of time running repetitive operations across multiple AWS accounts: scanning for cost optimization opportunities, checking resource utilization, cleaning up unused infrastructure. A plain CLI with flags works, but when you have 100+ AWS profiles to choose from and a dozen scan categories, an interactive TUI makes the experience significantly better.</p><p>The alternative is a web dashboard, but that means deploying and maintaining another service. A Go binary with a TUI is a single file you can distribute to your team.</p><h2 id=the-elm-architecture>The Elm Architecture<a href=#the-elm-architecture class=hanchor arialabel=Anchor>#</a></h2><p>Bubbletea follows <a href=https://guide.elm-lang.org/architecture/>The Elm Architecture</a>, which boils down to three concepts:</p><ol><li><strong>Model</strong> - your application state</li><li><strong>Update</strong> - a function that handles messages and updates the model</li><li><strong>View</strong> - a function that renders the model as a string</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>tea</span> <span class=s>&#34;github.com/charmbracelet/bubbletea&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>model</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>profiles</span> <span class=p>[]</span><span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>cursor</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>selected</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>model</span><span class=p>)</span> <span class=nf>Init</span><span class=p>()</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>model</span><span class=p>)</span> <span class=nf>Update</span><span class=p>(</span><span class=nx>msg</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Msg</span><span class=p>)</span> <span class=p>(</span><span class=nx>tea</span><span class=p>.</span><span class=nx>Model</span><span class=p>,</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=nx>msg</span> <span class=o>:=</span> <span class=nx>msg</span><span class=p>.(</span><span class=kd>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>KeyMsg</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=nx>msg</span><span class=p>.</span><span class=nf>String</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;ctrl+c&#34;</span><span class=p>,</span> <span class=s>&#34;q&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>m</span><span class=p>,</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Quit</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;up&#34;</span><span class=p>,</span> <span class=s>&#34;k&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>m</span><span class=p>.</span><span class=nx>cursor</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>m</span><span class=p>.</span><span class=nx>cursor</span><span class=o>--</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;down&#34;</span><span class=p>,</span> <span class=s>&#34;j&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>m</span><span class=p>.</span><span class=nx>cursor</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>m</span><span class=p>.</span><span class=nx>profiles</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>m</span><span class=p>.</span><span class=nx>cursor</span><span class=o>++</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;enter&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>m</span><span class=p>.</span><span class=nx>selected</span> <span class=p>=</span> <span class=nx>m</span><span class=p>.</span><span class=nx>profiles</span><span class=p>[</span><span class=nx>m</span><span class=p>.</span><span class=nx>cursor</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>m</span><span class=p>,</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Quit</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>m</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>model</span><span class=p>)</span> <span class=nf>View</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=s>&#34;Select an AWS profile:\n\n&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>profile</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>m</span><span class=p>.</span><span class=nx>profiles</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>cursor</span> <span class=o>:=</span> <span class=s>&#34; &#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>m</span><span class=p>.</span><span class=nx>cursor</span> <span class=o>==</span> <span class=nx>i</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>cursor</span> <span class=p>=</span> <span class=s>&#34;&gt;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span> <span class=o>+=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%s %s\n&#34;</span><span class=p>,</span> <span class=nx>cursor</span><span class=p>,</span> <span class=nx>profile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>+=</span> <span class=s>&#34;\nPress q to quit.\n&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This gives you a scrollable list with keyboard navigation. But we can do much better with the higher-level libraries.</p><h2 id=using-huh-for-forms>Using Huh for Forms<a href=#using-huh-for-forms class=hanchor arialabel=Anchor>#</a></h2><p><a href=https://github.com/charmbracelet/huh>Huh</a> provides pre-built form components (selects, multi-selects, inputs, confirms) that handle all the rendering and interaction logic for you. This is what I use for building the interactive parts of DevOps tools.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/charmbracelet/huh&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>profile</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>services</span> <span class=p>[]</span><span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>dryRun</span> <span class=kt>bool</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>form</span> <span class=o>:=</span> <span class=nx>huh</span><span class=p>.</span><span class=nf>NewForm</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>huh</span><span class=p>.</span><span class=nf>NewGroup</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>huh</span><span class=p>.</span><span class=nx>NewSelect</span><span class=p>[</span><span class=kt>string</span><span class=p>]().</span>
</span></span><span class=line><span class=cl>                <span class=nf>Title</span><span class=p>(</span><span class=s>&#34;AWS Profile&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Description</span><span class=p>(</span><span class=s>&#34;Select the AWS account to scan&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Options</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;production-eu&#34;</span><span class=p>,</span> <span class=s>&#34;prod-eu&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;staging-eu&#34;</span><span class=p>,</span> <span class=s>&#34;staging-eu&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;development-eu&#34;</span><span class=p>,</span> <span class=s>&#34;dev-eu&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Value</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>profile</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>huh</span><span class=p>.</span><span class=nx>NewMultiSelect</span><span class=p>[</span><span class=kt>string</span><span class=p>]().</span>
</span></span><span class=line><span class=cl>                <span class=nf>Title</span><span class=p>(</span><span class=s>&#34;Services to Scan&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Description</span><span class=p>(</span><span class=s>&#34;Choose which services to analyze&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Options</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;ECS Fargate&#34;</span><span class=p>,</span> <span class=s>&#34;ecs&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;Aurora Clusters&#34;</span><span class=p>,</span> <span class=s>&#34;aurora&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;S3 Buckets&#34;</span><span class=p>,</span> <span class=s>&#34;s3&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;EBS Volumes&#34;</span><span class=p>,</span> <span class=s>&#34;ebs&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;CloudWatch Logs&#34;</span><span class=p>,</span> <span class=s>&#34;cloudwatch&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=s>&#34;ElastiCache&#34;</span><span class=p>,</span> <span class=s>&#34;elasticache&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Value</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>services</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>huh</span><span class=p>.</span><span class=nf>NewConfirm</span><span class=p>().</span>
</span></span><span class=line><span class=cl>                <span class=nf>Title</span><span class=p>(</span><span class=s>&#34;Dry Run?&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Description</span><span class=p>(</span><span class=s>&#34;Preview changes without applying them&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>                <span class=nf>Value</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>dryRun</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=o>:=</span> <span class=nx>form</span><span class=p>.</span><span class=nf>Run</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Error:&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Scanning %s for: %v (dry-run: %v)\n&#34;</span><span class=p>,</span> <span class=nx>profile</span><span class=p>,</span> <span class=nx>services</span><span class=p>,</span> <span class=nx>dryRun</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This gives you a polished, themed form with keyboard navigation, validation, and proper rendering out of the box.</p><h2 id=loading-aws-profiles-dynamically>Loading AWS Profiles Dynamically<a href=#loading-aws-profiles-dynamically class=hanchor arialabel=Anchor>#</a></h2><p>In practice, you want to load profiles from <code>~/.aws/credentials</code> rather than hardcoding them:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;path/filepath&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/charmbracelet/huh&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>loadAWSProfiles</span><span class=p>()</span> <span class=p>([]</span><span class=nx>huh</span><span class=p>.</span><span class=nx>Option</span><span class=p>[</span><span class=kt>string</span><span class=p>],</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>home</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>UserHomeDir</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Join</span><span class=p>(</span><span class=nx>home</span><span class=p>,</span> <span class=s>&#34;.aws&#34;</span><span class=p>,</span> <span class=s>&#34;credentials&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>options</span> <span class=p>[]</span><span class=nx>huh</span><span class=p>.</span><span class=nx>Option</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>scanner</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>scanner</span><span class=p>.</span><span class=nf>Scan</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>line</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>TrimSpace</span><span class=p>(</span><span class=nx>scanner</span><span class=p>.</span><span class=nf>Text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>HasPrefix</span><span class=p>(</span><span class=nx>line</span><span class=p>,</span> <span class=s>&#34;[&#34;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>HasSuffix</span><span class=p>(</span><span class=nx>line</span><span class=p>,</span> <span class=s>&#34;]&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>profile</span> <span class=o>:=</span> <span class=nx>line</span><span class=p>[</span><span class=mi>1</span> <span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=nx>line</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=nx>options</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>huh</span><span class=p>.</span><span class=nf>NewOption</span><span class=p>(</span><span class=nx>profile</span><span class=p>,</span> <span class=nx>profile</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>scanner</span><span class=p>.</span><span class=nf>Err</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=running-scans-with-a-spinner>Running Scans with a Spinner<a href=#running-scans-with-a-spinner class=hanchor arialabel=Anchor>#</a></h2><p>Once the user selects their options, you want to show progress. Bubbletea&rsquo;s <code>spinner</code> component works well here:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/charmbracelet/bubbles/spinner&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>tea</span> <span class=s>&#34;github.com/charmbracelet/bubbletea&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/charmbracelet/lipgloss&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scanModel</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>spinner</span>  <span class=nx>spinner</span><span class=p>.</span><span class=nx>Model</span>
</span></span><span class=line><span class=cl>    <span class=nx>scanning</span> <span class=kt>bool</span>
</span></span><span class=line><span class=cl>    <span class=nx>results</span>  <span class=p>[]</span><span class=nx>ScanResult</span>
</span></span><span class=line><span class=cl>    <span class=nx>current</span>  <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ScanResult</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Service</span>        <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>ResourceCount</span>  <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>EstimatedSaving</span> <span class=kt>float64</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scanDoneMsg</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>results</span> <span class=p>[]</span><span class=nx>ScanResult</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScanModel</span><span class=p>(</span><span class=nx>services</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=nx>scanModel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=nx>spinner</span><span class=p>.</span><span class=nf>New</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>Spinner</span> <span class=p>=</span> <span class=nx>spinner</span><span class=p>.</span><span class=nx>Dot</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>Style</span> <span class=p>=</span> <span class=nx>lipgloss</span><span class=p>.</span><span class=nf>NewStyle</span><span class=p>().</span><span class=nf>Foreground</span><span class=p>(</span><span class=nx>lipgloss</span><span class=p>.</span><span class=nf>Color</span><span class=p>(</span><span class=s>&#34;205&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scanModel</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>spinner</span><span class=p>:</span>  <span class=nx>s</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scanning</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>current</span><span class=p>:</span>  <span class=nx>services</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>scanModel</span><span class=p>)</span> <span class=nf>Init</span><span class=p>()</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>tea</span><span class=p>.</span><span class=nf>Batch</span><span class=p>(</span><span class=nx>m</span><span class=p>.</span><span class=nx>spinner</span><span class=p>.</span><span class=nx>Tick</span><span class=p>,</span> <span class=nf>runScans</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>scanModel</span><span class=p>)</span> <span class=nf>Update</span><span class=p>(</span><span class=nx>msg</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Msg</span><span class=p>)</span> <span class=p>(</span><span class=nx>tea</span><span class=p>.</span><span class=nx>Model</span><span class=p>,</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=nx>msg</span> <span class=o>:=</span> <span class=nx>msg</span><span class=p>.(</span><span class=kd>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>scanDoneMsg</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>m</span><span class=p>.</span><span class=nx>scanning</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=nx>m</span><span class=p>.</span><span class=nx>results</span> <span class=p>=</span> <span class=nx>msg</span><span class=p>.</span><span class=nx>results</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>m</span><span class=p>,</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Quit</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>spinner</span><span class=p>.</span><span class=nx>TickMsg</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>cmd</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span>
</span></span><span class=line><span class=cl>        <span class=nx>m</span><span class=p>.</span><span class=nx>spinner</span><span class=p>,</span> <span class=nx>cmd</span> <span class=p>=</span> <span class=nx>m</span><span class=p>.</span><span class=nx>spinner</span><span class=p>.</span><span class=nf>Update</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>m</span><span class=p>,</span> <span class=nx>cmd</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>m</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>scanModel</span><span class=p>)</span> <span class=nf>View</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>m</span><span class=p>.</span><span class=nx>scanning</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%s Scanning %s...\n&#34;</span><span class=p>,</span> <span class=nx>m</span><span class=p>.</span><span class=nx>spinner</span><span class=p>.</span><span class=nf>View</span><span class=p>(),</span> <span class=nx>m</span><span class=p>.</span><span class=nx>current</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=s>&#34;Scan Results:\n\n&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>totalSaving</span> <span class=o>:=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>r</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>m</span><span class=p>.</span><span class=nx>results</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span> <span class=o>+=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;  %s: %d resources, estimated saving: EUR %.2f/month\n&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>r</span><span class=p>.</span><span class=nx>Service</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>ResourceCount</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>EstimatedSaving</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>totalSaving</span> <span class=o>+=</span> <span class=nx>r</span><span class=p>.</span><span class=nx>EstimatedSaving</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>+=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;\n  Total estimated saving: EUR %.2f/month (EUR %.2f/year)\n&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>totalSaving</span><span class=p>,</span> <span class=nx>totalSaving</span><span class=o>*</span><span class=mi>12</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>runScans</span><span class=p>()</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kd>func</span><span class=p>()</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Msg</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Your actual AWS scanning logic goes here</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span> <span class=c1>// Simulated scan</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>scanDoneMsg</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>results</span><span class=p>:</span> <span class=p>[]</span><span class=nx>ScanResult</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=nx>Service</span><span class=p>:</span> <span class=s>&#34;ECS Fargate&#34;</span><span class=p>,</span> <span class=nx>ResourceCount</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span> <span class=nx>EstimatedSaving</span><span class=p>:</span> <span class=mf>340.50</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=nx>Service</span><span class=p>:</span> <span class=s>&#34;EBS Volumes&#34;</span><span class=p>,</span> <span class=nx>ResourceCount</span><span class=p>:</span> <span class=mi>8</span><span class=p>,</span> <span class=nx>EstimatedSaving</span><span class=p>:</span> <span class=mf>120.00</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=nx>Service</span><span class=p>:</span> <span class=s>&#34;CloudWatch Logs&#34;</span><span class=p>,</span> <span class=nx>ResourceCount</span><span class=p>:</span> <span class=mi>45</span><span class=p>,</span> <span class=nx>EstimatedSaving</span><span class=p>:</span> <span class=mf>85.30</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=parallel-scanning-with-goroutines>Parallel Scanning with Goroutines<a href=#parallel-scanning-with-goroutines class=hanchor arialabel=Anchor>#</a></h2><p>For a real tool, you want to scan multiple services in parallel:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>scanServices</span><span class=p>(</span><span class=nx>profile</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>services</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Cmd</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kd>func</span><span class=p>()</span> <span class=nx>tea</span><span class=p>.</span><span class=nx>Msg</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>results</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=nx>ScanResult</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>services</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>wg</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>cfg</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>config</span><span class=p>.</span><span class=nf>LoadDefaultConfig</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>config</span><span class=p>.</span><span class=nf>WithSharedConfigProfile</span><span class=p>(</span><span class=nx>profile</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>scanErrorMsg</span><span class=p>{</span><span class=nx>err</span><span class=p>:</span> <span class=nx>err</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>svc</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>services</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>service</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>defer</span> <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nx>result</span> <span class=o>:=</span> <span class=nf>scanService</span><span class=p>(</span><span class=nx>cfg</span><span class=p>,</span> <span class=nx>service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nx>results</span> <span class=o>&lt;-</span> <span class=nx>result</span>
</span></span><span class=line><span class=cl>            <span class=p>}(</span><span class=nx>svc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>close</span><span class=p>(</span><span class=nx>results</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>allResults</span> <span class=p>[]</span><span class=nx>ScanResult</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>r</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>results</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>allResults</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>allResults</span><span class=p>,</span> <span class=nx>r</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>scanDoneMsg</span><span class=p>{</span><span class=nx>results</span><span class=p>:</span> <span class=nx>allResults</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=rendering-tables-with-lipgloss>Rendering Tables with Lipgloss<a href=#rendering-tables-with-lipgloss class=hanchor arialabel=Anchor>#</a></h2><p>For the final output, <a href=https://github.com/charmbracelet/lipgloss>Lipgloss</a> lets you style terminal output with a CSS-like API:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/charmbracelet/lipgloss&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/charmbracelet/lipgloss/table&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>renderResults</span><span class=p>(</span><span class=nx>results</span> <span class=p>[]</span><span class=nx>ScanResult</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>headerStyle</span> <span class=o>:=</span> <span class=nx>lipgloss</span><span class=p>.</span><span class=nf>NewStyle</span><span class=p>().</span>
</span></span><span class=line><span class=cl>        <span class=nf>Bold</span><span class=p>(</span><span class=kc>true</span><span class=p>).</span>
</span></span><span class=line><span class=cl>        <span class=nf>Foreground</span><span class=p>(</span><span class=nx>lipgloss</span><span class=p>.</span><span class=nf>Color</span><span class=p>(</span><span class=s>&#34;205&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>rows</span> <span class=o>:=</span> <span class=p>[][]</span><span class=kt>string</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>totalSaving</span> <span class=o>:=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>r</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>results</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>rows</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>rows</span><span class=p>,</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>r</span><span class=p>.</span><span class=nx>Service</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>ResourceCount</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;EUR %.2f&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>EstimatedSaving</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=nx>totalSaving</span> <span class=o>+=</span> <span class=nx>r</span><span class=p>.</span><span class=nx>EstimatedSaving</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>t</span> <span class=o>:=</span> <span class=nx>table</span><span class=p>.</span><span class=nf>New</span><span class=p>().</span>
</span></span><span class=line><span class=cl>        <span class=nf>Border</span><span class=p>(</span><span class=nx>lipgloss</span><span class=p>.</span><span class=nf>NormalBorder</span><span class=p>()).</span>
</span></span><span class=line><span class=cl>        <span class=nf>Headers</span><span class=p>(</span><span class=s>&#34;Service&#34;</span><span class=p>,</span> <span class=s>&#34;Resources&#34;</span><span class=p>,</span> <span class=s>&#34;Est. Saving/month&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>        <span class=nf>Rows</span><span class=p>(</span><span class=nx>rows</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>summary</span> <span class=o>:=</span> <span class=nx>headerStyle</span><span class=p>.</span><span class=nf>Render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;\nTotal: EUR %.2f/month (EUR %.2f/year)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>totalSaving</span><span class=p>,</span> <span class=nx>totalSaving</span><span class=o>*</span><span class=mi>12</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>t</span><span class=p>.</span><span class=nf>String</span><span class=p>()</span> <span class=o>+</span> <span class=s>&#34;\n&#34;</span> <span class=o>+</span> <span class=nx>summary</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=distributing-the-binary>Distributing the Binary<a href=#distributing-the-binary class=hanchor arialabel=Anchor>#</a></h2><p>One of the best things about Go is the single-binary output. Build for your team&rsquo;s platforms:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>GOOS</span><span class=o>=</span>linux <span class=nv>GOARCH</span><span class=o>=</span>amd64 go build -o tool-linux-amd64
</span></span><span class=line><span class=cl><span class=nv>GOOS</span><span class=o>=</span>darwin <span class=nv>GOARCH</span><span class=o>=</span>arm64 go build -o tool-darwin-arm64
</span></span><span class=line><span class=cl><span class=nv>GOOS</span><span class=o>=</span>windows <span class=nv>GOARCH</span><span class=o>=</span>amd64 go build -o tool-windows-amd64.exe
</span></span></code></pre></div><p>Or use GoReleaser to automate this with your CI pipeline.</p><h2 id=takeaways>Takeaways<a href=#takeaways class=hanchor arialabel=Anchor>#</a></h2><p>After building several internal tools with this stack, here are my recommendations:</p><ul><li><strong>Use Huh for forms, Bubbletea for custom interactions.</strong> Don&rsquo;t build a custom select component when Huh already has one.</li><li><strong>Keep the TUI thin.</strong> The interactive part should only collect user input. The actual business logic (AWS API calls, scanning, etc.) should be in separate packages that can also be called non-interactively via flags.</li><li><strong>Add a <code>--json</code> flag.</strong> Other tools and scripts will want to consume your output.</li><li><strong>Test with <code>tea.NewProgram</code> options.</strong> Bubbletea supports testing by passing in a custom reader/writer.</li></ul><p>The charmbracelet ecosystem makes it easy to build tools that your team will actually enjoy using, instead of yet another script with 30 flags.</p><h2 id=references>References<a href=#references class=hanchor arialabel=Anchor>#</a></h2><ul><li><a href=https://github.com/charmbracelet/bubbletea>Bubbletea</a></li><li><a href=https://github.com/charmbracelet/huh>Huh</a></li><li><a href=https://github.com/charmbracelet/lipgloss>Lipgloss</a></li><li><a href=https://github.com/charmbracelet/bubbles>Bubbles</a> (pre-built components)</li><li><a href=https://guide.elm-lang.org/architecture/>The Elm Architecture</a></li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><a href=https://manuelfedele.github.io/posts/building-ai-document-processing-pipeline-aws/ class="button inline prev">&lt; [<span class=button__text>Building an AI-Powered Document Processing Pipeline on AWS</span>]
</a>::
<a href=https://manuelfedele.github.io/posts/multi-account-aws-terraform-workspaces/ class="button inline next">[<span class=button__text>Managing Multi-Account AWS Infrastructure with Terraform Workspaces</span>] ></a></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>Â© 2026 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>