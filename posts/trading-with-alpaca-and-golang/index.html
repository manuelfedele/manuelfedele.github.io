<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data &#183; Git Push and Run</title><meta name=title content="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data &#183; Git Push and Run"><meta name=description content="Software Engineer and Cloud Architect writing about Go, Python, AWS, and AI automation."><meta name=keywords content="alpaca,trading,golang,finance,"><link rel=canonical href=https://manuelfedele.github.io/posts/trading-with-alpaca-and-golang/><meta name=author content="Manuel Fedele"><link href=https://github.com/manuelfedele rel=me><link href=https://linkedin.com/in/manuel-fedele rel=me><meta property="og:url" content="https://manuelfedele.github.io/posts/trading-with-alpaca-and-golang/"><meta property="og:site_name" content="Git Push and Run"><meta property="og:title" content="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data"><meta property="og:description" content="Alpaca provides commission-free, API-first trading with a paper trading environment for safe strategy testing. This post covers the actual Go SDK patterns, correct order placement, real-time data retrieval, a simple momentum strategy, and the risk management you need before going live. The original version of this post called functions like alpaca.PlaceOrder, alpaca.GetQuote, and alpaca.ListTrades as package-level functions. None of these exist in the current SDK. The real library uses a client struct. This post uses the actual github.com/alpacahq/alpaca-trade-api-go/v3/alpaca package."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-15T19:24:09+01:00"><meta property="article:modified_time" content="2023-01-15T19:24:09+01:00"><meta property="article:tag" content="Alpaca"><meta property="article:tag" content="Trading"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Finance"><meta name=twitter:card content="summary"><meta name=twitter:title content="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data"><meta name=twitter:description content="Alpaca provides commission-free, API-first trading with a paper trading environment for safe strategy testing. This post covers the actual Go SDK patterns, correct order placement, real-time data retrieval, a simple momentum strategy, and the risk management you need before going live. The original version of this post called functions like alpaca.PlaceOrder, alpaca.GetQuote, and alpaca.ListTrades as package-level functions. None of these exist in the current SDK. The real library uses a client struct. This post uses the actual github.com/alpacahq/alpaca-trade-api-go/v3/alpaca package."><link type=text/css rel=stylesheet href=/css/main.bundle.min.726dfbf42bcd66e35e2d7258d72fe8fe77509ff76d153e2b46cdbae9c3af9620653459f0119a72d2af4a9b4bc446652d244ad58743d0290e5d8e09e3983b98e5.css integrity="sha512-cm379CvNZuNeLXJY1y/o/ndQn/dtFT4rRs266cOvliBlNFnwEZpy0q9Km0vERmUtJErVh0PQKQ5djgnjmDuY5Q=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.88278edec77139635e1ad294df5b32b7be9338191c5252d3f6f451ace5852d5f82390cccacedab9c64739d8e068b7e8502895cf8f951060c0368f9a73709fcb7.js integrity="sha512-iCeO3sdxOWNeGtKU31syt76TOBkcUlLT9vRRrOWFLV+COQzMrO2rnGRznY4Gi36FAolc+PlRBgwDaPmnNwn8tw==" data-copy=Copy data-copied=Copied></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data","headline":"Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data","inLanguage":"en","url":"https://manuelfedele.github.io/posts/trading-with-alpaca-and-golang/","author":{"@type":"Person","name":"Manuel Fedele"},"copyrightYear":"2023","dateCreated":"2023-01-15T19:24:09\u002b01:00","datePublished":"2023-01-15T19:24:09\u002b01:00","dateModified":"2023-01-15T19:24:09\u002b01:00","keywords":["alpaca","trading","golang","finance"],"mainEntityOfPage":"true","wordCount":"1302"}]</script></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl bg-neutral/25 dark:bg-neutral-800/25"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><a href=/ class="text-base font-medium truncate min-w-0 shrink">Git Push and Run</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><a href=/posts/ class="flex items-center bf-icon-color-hover" aria-label=Blog title=Posts><span class="text-base font-medium break-normal">Blog
</span></a><a href=/about/ class="flex items-center bf-icon-color-hover" aria-label=About title=About><span class="text-base font-medium break-normal">About
</span></a><a href=/coaching/ class="flex items-center bf-icon-color-hover" aria-label=Coaching title=Coaching><span class="text-base font-medium break-normal">Coaching
</span></a><a href=https://github.com/manuelfedele target=_blank class="flex items-center bf-icon-color-hover" aria-label=github title><span><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/trading-with-alpaca-and-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data">EN
</span></a><a href=/it/posts/trading-with-alpaca-and-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Trading algoritmico con Alpaca e Go: paper trading e dati in tempo reale">IT</span></a></li></ul></div><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<input type=checkbox id=mobile-menu-toggle autocomplete=off class="hidden peer">
<label for=mobile-menu-toggle class="flex items-center justify-center cursor-pointer bf-icon-color-hover"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></label><div role=dialog aria-modal=true style=scrollbar-gutter:stable class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
bf-scrollbar"><label for=mobile-menu-toggle class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></label><nav class="mx-auto max-w-md space-y-6"><div class=px-2><a href=/posts/ aria-label=Blog class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Posts class="text-2xl font-bold tracking-tight">Blog</span></a></div><div class=px-2><a href=/about/ aria-label=About class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=About class="text-2xl font-bold tracking-tight">About</span></a></div><div class=px-2><a href=/coaching/ aria-label=Coaching class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Coaching class="text-2xl font-bold tracking-tight">Coaching</span></a></div><div class=px-2><a href=https://github.com/manuelfedele aria-label=github target=_blank class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span><span title class="text-2xl font-bold tracking-tight"></span></a></div><div class="flex flex-wrap items-center [&_span]:text-2xl [&_.translation_button_.icon]:text-4xl! [&_.translation_button_span]:text-base! [&_.translation_.menuhide_span]:text-sm! gap-x-6 ps-2 mt-8 pt-8 border-t bf-border-color"><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/trading-with-alpaca-and-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data">EN
</span></a><a href=/it/posts/trading-with-alpaca-and-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Trading algoritmico con Alpaca e Go: paper trading e dati in tempo reale">IT</span></a></li></ul></div></div></nav></div></div></div></div></div><script>(function(){var t,n,e=document.querySelector(".main-menu");if(!e)return;t=window.location.pathname,n=e.querySelectorAll('a[href="'+t+'"]'),n.forEach(function(e){var t=e.querySelectorAll("span");t.forEach(function(e){e.classList.add("active")})})})()</script></div></div><script type=text/javascript src=/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"><img id=background-image src="https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=1200&amp;q=85" role=presentation loading=eager decoding=async fetchpriority=high class="absolute inset-0 w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-xl bg-neutral-100/75 dark:bg-neutral-800/60"></div><script type=text/javascript src=/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=background-blur data-image-id=background-image data-image-url="https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=1200&amp;q=85"></script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-15T19:24:09+01:00>15 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/alpaca/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Alpaca
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/trading/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Trading
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/finance/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Finance</span></span></a></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#setup-account-and-client-initialization>Setup: Account and Client Initialization</a></li><li><a href=#account-and-portfolio-state>Account and Portfolio State</a></li><li><a href=#market-data-historical-bars>Market Data: Historical Bars</a></li><li><a href=#placing-orders>Placing Orders</a></li><li><a href=#a-simple-momentum-strategy>A Simple Momentum Strategy</a></li><li><a href=#risk-management>Risk Management</a></li><li><a href=#paper-trading-discipline>Paper Trading Discipline</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#setup-account-and-client-initialization>Setup: Account and Client Initialization</a></li><li><a href=#account-and-portfolio-state>Account and Portfolio State</a></li><li><a href=#market-data-historical-bars>Market Data: Historical Bars</a></li><li><a href=#placing-orders>Placing Orders</a></li><li><a href=#a-simple-momentum-strategy>A Simple Momentum Strategy</a></li><li><a href=#risk-management>Risk Management</a></li><li><a href=#paper-trading-discipline>Paper Trading Discipline</a></li></ul></nav></div></details><script>(function(){"use strict";const s=.33,o="#TableOfContents",i=".anchor",a='a[href^="#"]',r="li ul",c="active";let t=!1;function l(e,n){const o=window.scrollY+window.innerHeight*n,i=[...document.querySelectorAll('#TableOfContents a[href^="#"]')],s=new Set(i.map(e=>e.getAttribute("href").substring(1)));if(t)for(let t=0;t<e.length;t++){const n=e[t];if(!s.has(n.id))continue;const o=n.getBoundingClientRect().top+window.scrollY;if(Math.abs(window.scrollY-o)<100)return n.id}for(let t=e.length-1;t>=0;t--){const n=e[t].getBoundingClientRect().top+window.scrollY;if(n<=o&&s.has(e[t].id))return e[t].id}return e.find(e=>s.has(e.id))?.id||""}function e({toc:e,anchors:t,links:n,scrollOffset:s,collapseInactive:o}){const i=l(t,s);if(!i)return;if(n.forEach(e=>{const t=e.getAttribute("href")===`#${i}`;if(e.classList.toggle(c,t),o){const n=e.closest("li")?.querySelector("ul");n&&(n.style.display=t?"":"none")}}),o){const n=e.querySelector(`a[href="#${CSS.escape(i)}"]`);let t=n;for(;t&&t!==e;)t.tagName==="UL"&&(t.style.display=""),t.tagName==="LI"&&t.querySelector("ul")?.style.setProperty("display",""),t=t.parentElement}}function n(){const n=document.querySelector(o);if(!n)return;const l=!0,u=[...document.querySelectorAll(i)],d=[...n.querySelectorAll(a)];l&&n.querySelectorAll(r).forEach(e=>e.style.display="none"),d.forEach(e=>{e.addEventListener("click",()=>{t=!0})});const c={toc:n,anchors:u,links:d,scrollOffset:s,collapseInactive:l};window.addEventListener("scroll",()=>e(c),{passive:!0}),window.addEventListener("hashchange",()=>e(c),{passive:!0}),e(c)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><div class="lead text-neutral-500 dark:text-neutral-400 !mb-9 text-xl">Alpaca provides commission-free, API-first trading with a paper trading environment for safe strategy testing. This post covers the actual Go SDK patterns, correct order placement, real-time data retrieval, a simple momentum strategy, and the risk management you need before going live.</div><p>The original version of this post called functions like <code>alpaca.PlaceOrder</code>, <code>alpaca.GetQuote</code>, and <code>alpaca.ListTrades</code> as package-level functions. None of these exist in the current SDK. The real library uses a client struct. This post uses the actual <code>github.com/alpacahq/alpaca-trade-api-go/v3/alpaca</code> package.</p><div class="admonition relative overflow-hidden rounded-lg border-l-4 my-3 px-4 py-3 shadow-sm" data-type=important><div class="flex items-center gap-2 font-semibold text-inherit"><div class="flex shrink-0 h-5 w-5 items-center justify-center text-lg"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M287.9.0C297.1.0 305.5 5.25 309.5 13.52L378.1 154.8l153.3 22.7C540.4 178.8 547.8 185.1 550.7 193.7 553.5 202.4 551.2 211.9 544.8 218.2L433.6 328.4l26.3 155.5C461.4 492.9 457.7 502.1 450.2 507.4 442.8 512.7 432.1 513.4 424.9 509.1L287.9 435.9 150.1 509.1C142.9 513.4 133.1 512.7 125.6 507.4 118.2 502.1 114.5 492.9 115.1 483.9l27.1-155.5L31.11 218.2C24.65 211.9 22.36 202.4 25.2 193.7 28.03 185.1 35.5 178.8 44.49 177.5L197.7 154.8 266.3 13.52C270.4 5.249 278.7.0 287.9.0zm0 78.95L235.4 187.2C231.9 194.3 225.1 199.3 217.3 200.5L98.98 217.9 184.9 303C190.4 308.5 192.9 316.4 191.6 324.1L171.4 443.7l105.2-56.2C283.7 383.7 292.2 383.7 299.2 387.5l105.2 56.2-20.2-119.6C382.9 316.4 385.5 308.5 391 303l85.9-85.1-118.3-17.4C350.7 199.3 343.9 194.3 340.5 187.2L287.9 78.95z"/></svg></span></div><div class=grow>Important</div></div><div class="admonition-content mt-3 text-base leading-relaxed text-inherit"><p>Always start with paper trading. The paper environment (<code>https://paper-api.alpaca.markets</code>) uses real market data with simulated money. Test your strategy thoroughly before switching to <code>https://api.alpaca.markets</code>.</p></div></div><h2 class="relative group">Setup: Account and Client Initialization<div id=setup-account-and-client-initialization class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#setup-account-and-client-initialization aria-label=Anchor>#</a></span></h2><p>Sign up at <a href=https://alpaca.markets target=_blank rel=noreferrer>alpaca.markets</a>, go to Paper Trading, and generate API keys. The paper and live environments use separate key pairs.</p><div class=highlight-wrapper><div class=codeblock-title>client.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;log&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;os&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/alpaca&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>newClient</span><span style=color:#eceff4>()</span> <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> alpaca<span style=color:#eceff4>.</span><span style=color:#88c0d0>NewClient</span><span style=color:#eceff4>(</span>alpaca<span style=color:#eceff4>.</span>ClientOpts<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        APIKey<span style=color:#eceff4>:</span>    os<span style=color:#eceff4>.</span><span style=color:#88c0d0>Getenv</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;APCA_API_KEY_ID&#34;</span><span style=color:#eceff4>),</span>
</span></span><span style=display:flex><span>        APISecret<span style=color:#eceff4>:</span> os<span style=color:#eceff4>.</span><span style=color:#88c0d0>Getenv</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;APCA_API_SECRET_KEY&#34;</span><span style=color:#eceff4>),</span>
</span></span><span style=display:flex><span>        BaseURL<span style=color:#eceff4>:</span>   <span style=color:#a3be8c>&#34;https://paper-api.alpaca.markets&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>printAccount</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>)</span> <span style=color:#81a1c1>error</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    account<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetAccount</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get account: %w&#34;</span><span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;equity:       $%s\n&#34;</span><span style=color:#eceff4>,</span> account<span style=color:#eceff4>.</span>Equity<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;buying power: $%s\n&#34;</span><span style=color:#eceff4>,</span> account<span style=color:#eceff4>.</span>BuyingPower<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;cash:         $%s\n&#34;</span><span style=color:#eceff4>,</span> account<span style=color:#eceff4>.</span>Cash<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>main</span><span style=color:#eceff4>()</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    client <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>newClient</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>printAccount</span><span style=color:#eceff4>(</span>client<span style=color:#eceff4>);</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Fatal</span><span style=color:#eceff4>(</span>err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><p>Never hardcode API keys. Read them from environment variables or a secrets manager.</p><h2 class="relative group">Account and Portfolio State<div id=account-and-portfolio-state class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#account-and-portfolio-state aria-label=Anchor>#</a></span></h2><div class=highlight-wrapper><div class=codeblock-title>portfolio.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;strings&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/alpaca&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>printPortfolio</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>)</span> <span style=color:#81a1c1>error</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    positions<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetPositions</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get positions: %w&#34;</span><span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> <span style=color:#81a1c1>len</span><span style=color:#eceff4>(</span>positions<span style=color:#eceff4>)</span> <span style=color:#81a1c1>==</span> <span style=color:#b48ead>0</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Println</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;no open positions&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;%-8s %8s %12s %12s %10s\n&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;SYMBOL&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;QTY&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;ENTRY&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;CURRENT&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;P&amp;L&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Println</span><span style=color:#eceff4>(</span>strings<span style=color:#eceff4>.</span><span style=color:#88c0d0>Repeat</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;-&#34;</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>54</span><span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> _<span style=color:#eceff4>,</span> p <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1;font-weight:700>range</span> positions <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;%-8s %8s %12s %12s %10s\n&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            p<span style=color:#eceff4>.</span>Symbol<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            p<span style=color:#eceff4>.</span>Qty<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            p<span style=color:#eceff4>.</span>AvgEntryPrice<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            p<span style=color:#eceff4>.</span>CurrentPrice<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            p<span style=color:#eceff4>.</span>UnrealizedPL<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><h2 class="relative group">Market Data: Historical Bars<div id=market-data-historical-bars class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#market-data-historical-bars aria-label=Anchor>#</a></span></h2><p>The market data client is a separate struct in the <code>marketdata</code> package with its own base URL.</p><div class=highlight-wrapper><div class=codeblock-title>bars.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;os&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;time&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/marketdata&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>getHistoricalBars</span><span style=color:#eceff4>(</span>symbol <span style=color:#81a1c1>string</span><span style=color:#eceff4>,</span> days <span style=color:#81a1c1>int</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>([]</span>marketdata<span style=color:#eceff4>.</span>Bar<span style=color:#eceff4>,</span> <span style=color:#81a1c1>error</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    mdClient <span style=color:#81a1c1>:=</span> marketdata<span style=color:#eceff4>.</span><span style=color:#88c0d0>NewClient</span><span style=color:#eceff4>(</span>marketdata<span style=color:#eceff4>.</span>ClientOpts<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        APIKey<span style=color:#eceff4>:</span>    os<span style=color:#eceff4>.</span><span style=color:#88c0d0>Getenv</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;APCA_API_KEY_ID&#34;</span><span style=color:#eceff4>),</span>
</span></span><span style=display:flex><span>        APISecret<span style=color:#eceff4>:</span> os<span style=color:#eceff4>.</span><span style=color:#88c0d0>Getenv</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;APCA_API_SECRET_KEY&#34;</span><span style=color:#eceff4>),</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    end <span style=color:#81a1c1>:=</span> time<span style=color:#eceff4>.</span><span style=color:#88c0d0>Now</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    start <span style=color:#81a1c1>:=</span> end<span style=color:#eceff4>.</span><span style=color:#88c0d0>AddDate</span><span style=color:#eceff4>(</span><span style=color:#b48ead>0</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0</span><span style=color:#eceff4>,</span> <span style=color:#81a1c1>-</span>days<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    bars<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> mdClient<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetBars</span><span style=color:#eceff4>(</span>symbol<span style=color:#eceff4>,</span> marketdata<span style=color:#eceff4>.</span>GetBarsRequest<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        TimeFrame<span style=color:#eceff4>:</span> marketdata<span style=color:#eceff4>.</span>OneDay<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Start<span style=color:#eceff4>:</span>     start<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        End<span style=color:#eceff4>:</span>       end<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span><span style=color:#eceff4>,</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get bars for %s: %w&#34;</span><span style=color:#eceff4>,</span> symbol<span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> bars<span style=color:#eceff4>,</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><h2 class="relative group">Placing Orders<div id=placing-orders class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#placing-orders aria-label=Anchor>#</a></span></h2><div class=highlight-wrapper><div class=codeblock-title>orders.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/alpaca&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>placeMarketOrder</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>,</span> symbol <span style=color:#81a1c1>string</span><span style=color:#eceff4>,</span> qty <span style=color:#81a1c1>float64</span><span style=color:#eceff4>,</span> side alpaca<span style=color:#eceff4>.</span>Side<span style=color:#eceff4>)</span> <span style=color:#eceff4>(</span><span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Order<span style=color:#eceff4>,</span> <span style=color:#81a1c1>error</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    order<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>PlaceOrder</span><span style=color:#eceff4>(</span>alpaca<span style=color:#eceff4>.</span>PlaceOrderRequest<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        Symbol<span style=color:#eceff4>:</span>      symbol<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Qty<span style=color:#eceff4>:</span>         alpaca<span style=color:#eceff4>.</span><span style=color:#88c0d0>RoundToFractionOrWhole</span><span style=color:#eceff4>(</span>qty<span style=color:#eceff4>),</span>
</span></span><span style=display:flex><span>        Side<span style=color:#eceff4>:</span>        side<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Type<span style=color:#eceff4>:</span>        alpaca<span style=color:#eceff4>.</span>Market<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        TimeInForce<span style=color:#eceff4>:</span> alpaca<span style=color:#eceff4>.</span>Day<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span><span style=color:#eceff4>,</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;place market order %s %s: %w&#34;</span><span style=color:#eceff4>,</span> side<span style=color:#eceff4>,</span> symbol<span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> order<span style=color:#eceff4>,</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>placeLimitOrder</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>,</span> symbol <span style=color:#81a1c1>string</span><span style=color:#eceff4>,</span> qty<span style=color:#eceff4>,</span> limitPrice <span style=color:#81a1c1>float64</span><span style=color:#eceff4>,</span> side alpaca<span style=color:#eceff4>.</span>Side<span style=color:#eceff4>)</span> <span style=color:#eceff4>(</span><span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Order<span style=color:#eceff4>,</span> <span style=color:#81a1c1>error</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    lp <span style=color:#81a1c1>:=</span> alpaca<span style=color:#eceff4>.</span><span style=color:#88c0d0>RoundToFractionOrWhole</span><span style=color:#eceff4>(</span>limitPrice<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    order<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>PlaceOrder</span><span style=color:#eceff4>(</span>alpaca<span style=color:#eceff4>.</span>PlaceOrderRequest<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        Symbol<span style=color:#eceff4>:</span>      symbol<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Qty<span style=color:#eceff4>:</span>         alpaca<span style=color:#eceff4>.</span><span style=color:#88c0d0>RoundToFractionOrWhole</span><span style=color:#eceff4>(</span>qty<span style=color:#eceff4>),</span>
</span></span><span style=display:flex><span>        Side<span style=color:#eceff4>:</span>        side<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Type<span style=color:#eceff4>:</span>        alpaca<span style=color:#eceff4>.</span>Limit<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        LimitPrice<span style=color:#eceff4>:</span>  <span style=color:#81a1c1>&amp;</span>lp<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        TimeInForce<span style=color:#eceff4>:</span> alpaca<span style=color:#eceff4>.</span>GTC<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span><span style=color:#eceff4>,</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;place limit order %s %s: %w&#34;</span><span style=color:#eceff4>,</span> side<span style=color:#eceff4>,</span> symbol<span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> order<span style=color:#eceff4>,</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>cancelAllOrders</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>)</span> <span style=color:#81a1c1>error</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    status <span style=color:#81a1c1>:=</span> <span style=color:#a3be8c>&#34;open&#34;</span>
</span></span><span style=display:flex><span>    orders<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetOrders</span><span style=color:#eceff4>(</span>alpaca<span style=color:#eceff4>.</span>GetOrdersRequest<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        Status<span style=color:#eceff4>:</span> <span style=color:#81a1c1>&amp;</span>status<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Limit<span style=color:#eceff4>:</span>  <span style=color:#b48ead>50</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get orders: %w&#34;</span><span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> _<span style=color:#eceff4>,</span> o <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1;font-weight:700>range</span> orders <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>CancelOrder</span><span style=color:#eceff4>(</span>o<span style=color:#eceff4>.</span>ID<span style=color:#eceff4>);</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>            fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;warn: cancel order %s: %v\n&#34;</span><span style=color:#eceff4>,</span> o<span style=color:#eceff4>.</span>ID<span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><h2 class="relative group">A Simple Momentum Strategy<div id=a-simple-momentum-strategy class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#a-simple-momentum-strategy aria-label=Anchor>#</a></span></h2><p>Moving average crossover: buy when the 5-day SMA crosses above the 20-day SMA, sell when it crosses below. This is a standard signal used to demonstrate a complete strategy loop &ndash; test it in paper before drawing any conclusions about its edge.</p><div class=highlight-wrapper><div class=codeblock-title>strategy.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;log&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;math&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/alpaca&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/marketdata&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>sma</span><span style=color:#eceff4>(</span>bars <span style=color:#eceff4>[]</span>marketdata<span style=color:#eceff4>.</span>Bar<span style=color:#eceff4>,</span> period <span style=color:#81a1c1>int</span><span style=color:#eceff4>)</span> <span style=color:#81a1c1>float64</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> <span style=color:#81a1c1>len</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>)</span> <span style=color:#eceff4>&lt;</span> period <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#b48ead>0</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>var</span> sum <span style=color:#81a1c1>float64</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> _<span style=color:#eceff4>,</span> b <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1;font-weight:700>range</span> bars<span style=color:#eceff4>[</span><span style=color:#81a1c1>len</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>)</span><span style=color:#81a1c1>-</span>period<span style=color:#eceff4>:]</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        sum <span style=color:#81a1c1>+=</span> b<span style=color:#eceff4>.</span>Close
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> sum <span style=color:#81a1c1>/</span> <span style=color:#81a1c1>float64</span><span style=color:#eceff4>(</span>period<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>positionSize</span><span style=color:#eceff4>(</span>buyingPower<span style=color:#eceff4>,</span> price<span style=color:#eceff4>,</span> riskFraction <span style=color:#81a1c1>float64</span><span style=color:#eceff4>)</span> <span style=color:#81a1c1>float64</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    capital <span style=color:#81a1c1>:=</span> buyingPower <span style=color:#81a1c1>*</span> riskFraction
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> capital <span style=color:#81a1c1>/</span> price
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>runMomentumStrategy</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>,</span> symbol <span style=color:#81a1c1>string</span><span style=color:#eceff4>)</span> <span style=color:#81a1c1>error</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    bars<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>getHistoricalBars</span><span style=color:#eceff4>(</span>symbol<span style=color:#eceff4>,</span> <span style=color:#b48ead>30</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> err
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> <span style=color:#81a1c1>len</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>)</span> <span style=color:#eceff4>&lt;</span> <span style=color:#b48ead>20</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;not enough data: got %d bars, need 20&#34;</span><span style=color:#eceff4>,</span> <span style=color:#81a1c1>len</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    sma5 <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>sma</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>,</span> <span style=color:#b48ead>5</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    sma20 <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>sma</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>,</span> <span style=color:#b48ead>20</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    currentPrice <span style=color:#81a1c1>:=</span> bars<span style=color:#eceff4>[</span><span style=color:#81a1c1>len</span><span style=color:#eceff4>(</span>bars<span style=color:#eceff4>)</span><span style=color:#81a1c1>-</span><span style=color:#b48ead>1</span><span style=color:#eceff4>].</span>Close
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;%s: price=%.2f sma5=%.2f sma20=%.2f&#34;</span><span style=color:#eceff4>,</span> symbol<span style=color:#eceff4>,</span> currentPrice<span style=color:#eceff4>,</span> sma5<span style=color:#eceff4>,</span> sma20<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    account<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetAccount</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get account: %w&#34;</span><span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    buyingPower<span style=color:#eceff4>,</span> _ <span style=color:#81a1c1>:=</span> account<span style=color:#eceff4>.</span>BuyingPower<span style=color:#eceff4>.</span><span style=color:#88c0d0>Float64</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    equity<span style=color:#eceff4>,</span> _ <span style=color:#81a1c1>:=</span> account<span style=color:#eceff4>.</span>Equity<span style=color:#eceff4>.</span><span style=color:#88c0d0>Float64</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    lastEquity<span style=color:#eceff4>,</span> _ <span style=color:#81a1c1>:=</span> account<span style=color:#eceff4>.</span>LastEquity<span style=color:#eceff4>.</span><span style=color:#88c0d0>Float64</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Drawdown guard: stop trading if down more than 5% from last session</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> lastEquity <span style=color:#eceff4>&gt;</span> <span style=color:#b48ead>0</span> <span style=color:#81a1c1>&amp;&amp;</span> <span style=color:#eceff4>(</span>equity<span style=color:#81a1c1>/</span>lastEquity<span style=color:#81a1c1>-</span><span style=color:#b48ead>1</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>&lt;</span> <span style=color:#81a1c1>-</span><span style=color:#b48ead>0.05</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;drawdown limit hit, skipping trade&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    positions<span style=color:#eceff4>,</span> _ <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetPositions</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    hasPosition <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1;font-weight:700>false</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> _<span style=color:#eceff4>,</span> p <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1;font-weight:700>range</span> positions <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>if</span> p<span style=color:#eceff4>.</span>Symbol <span style=color:#81a1c1>==</span> symbol <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>            hasPosition <span style=color:#eceff4>=</span> <span style=color:#81a1c1;font-weight:700>true</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1;font-weight:700>break</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>switch</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>case</span> sma5 <span style=color:#eceff4>&gt;</span> sma20 <span style=color:#81a1c1>&amp;&amp;</span> <span style=color:#eceff4>!</span>hasPosition<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        qty <span style=color:#81a1c1>:=</span> math<span style=color:#eceff4>.</span><span style=color:#88c0d0>Floor</span><span style=color:#eceff4>(</span><span style=color:#88c0d0>positionSize</span><span style=color:#eceff4>(</span>buyingPower<span style=color:#eceff4>,</span> currentPrice<span style=color:#eceff4>,</span> <span style=color:#b48ead>0.02</span><span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>if</span> qty <span style=color:#eceff4>&lt;</span> <span style=color:#b48ead>1</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>            log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;position size too small, skipping&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>        order<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>placeMarketOrder</span><span style=color:#eceff4>(</span>client<span style=color:#eceff4>,</span> symbol<span style=color:#eceff4>,</span> qty<span style=color:#eceff4>,</span> alpaca<span style=color:#eceff4>.</span>Buy<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>        log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;buy order placed: %s&#34;</span><span style=color:#eceff4>,</span> order<span style=color:#eceff4>.</span>ID<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>case</span> sma5 <span style=color:#eceff4>&lt;</span> sma20 <span style=color:#81a1c1>&amp;&amp;</span> hasPosition<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        order<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>placeMarketOrder</span><span style=color:#eceff4>(</span>client<span style=color:#eceff4>,</span> symbol<span style=color:#eceff4>,</span> <span style=color:#b48ead>0</span><span style=color:#eceff4>,</span> alpaca<span style=color:#eceff4>.</span>Sell<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>        log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;sell order placed: %s&#34;</span><span style=color:#eceff4>,</span> order<span style=color:#eceff4>.</span>ID<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>default</span><span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Println</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;no signal, holding&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><h2 class="relative group">Risk Management<div id=risk-management class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#risk-management aria-label=Anchor>#</a></span></h2><p>Before every trading session, verify the account state and market hours:</p><div class=highlight-wrapper><div class=codeblock-title>risk.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;github.com/alpacahq/alpaca-trade-api-go/v3/alpaca&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>preTradeChecks</span><span style=color:#eceff4>(</span>client <span style=color:#81a1c1>*</span>alpaca<span style=color:#eceff4>.</span>Client<span style=color:#eceff4>)</span> <span style=color:#81a1c1>error</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    clock<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetClock</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get clock: %w&#34;</span><span style=color:#eceff4>,</span> err<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> <span style=color:#eceff4>!</span>clock<span style=color:#eceff4>.</span>IsOpen <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;market is closed, next open: %s&#34;</span><span style=color:#eceff4>,</span> clock<span style=color:#eceff4>.</span>NextOpen<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    account<span style=color:#eceff4>,</span> err <span style=color:#81a1c1>:=</span> client<span style=color:#eceff4>.</span><span style=color:#88c0d0>GetAccount</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> err <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> err
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> account<span style=color:#eceff4>.</span>TradingBlocked <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Errorf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;account trading is blocked&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><div class="admonition relative overflow-hidden rounded-lg border-l-4 my-3 px-4 py-3 shadow-sm" data-type=tip><div class="flex items-center gap-2 font-semibold text-inherit"><div class="flex shrink-0 h-5 w-5 items-center justify-center text-lg"><span class="relative block icon"><svg viewBox="0 0 384 512"><path fill="currentColor" d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438.0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1H112L112.1 454.3zM191.4.0132C89.44.3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8 16.53 18.84 42.34 58.23 52.22 91.45.0313.25.0938.5166.125.7823h160.2c.0313-.2656.0938-.5166.125-.7823 9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1 368 78.61 288.9-.2837 191.4.0132zM192 96.01c-44.13.0-80 35.89-80 79.1.0 9.69-7.2 16.89-16 16.89S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1 8.844.0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg></span></div><div class=grow>Tip</div></div><div class="admonition-content mt-3 text-base leading-relaxed text-inherit"><p>Always attach a stop-loss order immediately after a buy fills. A day order without a stop can be left open through extended hours, creating losses larger than intended.</p></div></div><h2 class="relative group">Paper Trading Discipline<div id=paper-trading-discipline class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#paper-trading-discipline aria-label=Anchor>#</a></span></h2><p>The correct sequence before putting real money at risk:</p><ol><li>Run the strategy in paper for at least 30 trading days</li><li>Record every trade: entry price, exit price, size, reason</li><li>Calculate Sharpe ratio and maximum drawdown over the test period</li><li>Validate that the edge holds across different market conditions (trending, ranging, volatile)</li><li>Only then switch to live with a small initial allocation</li></ol><p>A strategy that looks good in 5 days of paper trading has not been tested &ndash; it has gotten lucky.</p><div id=accordion-7c5ea8534dfb7365f9c7a6685e7e17f7 class="border border-neutral-200 dark:border-neutral-700 rounded-lg overflow-hidden" data-accordion=collapse data-accordion-separated=false><details class=border-none data-accordion-item><summary class="flex w-full cursor-pointer items-center justify-between gap-4 px-4 py-3 text-left text-lg font-semibold text-neutral-900 dark:text-neutral-100"><span class="flex items-center gap-2"><span>Common mistakes and how to avoid them</span>
</span><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></summary><div class="px-4 pb-4 text-neutral-700 dark:text-neutral-300"><p><strong>Skipping paper trading</strong>
Paper trading is not optional. The paper environment executes against real market data with simulated fills. Run your strategy for at least 30 trading days before committing real capital. Backtesting alone is insufficient &ndash; live execution has slippage, partial fills, and latency that backtests hide.</p><p><strong>No position sizing</strong>
Placing a fixed share count regardless of account size is not risk management. Always size positions as a fraction of equity or buying power. 1-2% of buying power per trade is a common starting point.</p><p><strong>Ignoring market hours</strong>
Orders placed outside market hours queue until the next open by default. A flood of queued orders from an overnight run can trigger unexpected fills at the open. Always check <code>clock.IsOpen</code> before trading.</p><p><strong>Not handling partial fills</strong>
A market order for 100 shares may fill in three separate lots at slightly different prices. Your order management code must handle <code>partially_filled</code> status and track the average fill price, not just the requested price.</p><p><strong>Hardcoding API keys</strong>
Alpaca API keys give full account access including withdrawals (on some configurations). Store them in environment variables or a secrets manager, never in source code or version control.</p></div></details></div><style>#accordion-7c5ea8534dfb7365f9c7a6685e7e17f7>details+details{border-top:1px solid rgb(var(--color-neutral-200))}.dark #accordion-7c5ea8534dfb7365f9c7a6685e7e17f7>details+details{border-top-color:rgb(var(--color-neutral-700))}</style><script>(()=>{const e=document.getElementById("accordion-7c5ea8534dfb7365f9c7a6685e7e17f7");if(!e)return;const t=e.querySelectorAll("details[data-accordion-item]");t.forEach(e=>{e.addEventListener("toggle",()=>{if(!e.open)return;t.forEach(t=>{t!==e&&t.removeAttribute("open")})})})})()</script><hr><p>If you want to go deeper on any of this, I offer 1:1 coaching sessions for engineers working on AI integration, cloud architecture, and platform engineering. <a href=https://calendly.com/manuelfedele/60min target=_blank rel=noreferrer>Book a session</a> (50 EUR / 60 min) or reach out at <a href=mailto:manuel.fedele+website@gmail.com>manuel.fedele+website@gmail.com</a>.</p></div><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1534972195531-d756b9bfa9f2?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/unit-testing-in-golang/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Testing in Go: From Unit Tests to Mocks and Benchmarks</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-09T20:49:03+01:00>9 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">8 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/testing/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Testing
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/streaming-video-with-golang/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Video Streaming in Go: HTTP Range Requests, HLS Segments, and FFmpeg</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-04T21:23:20+01:00>4 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">9 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/video-streaming/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Video Streaming
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/hls/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Hls
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/ffmpeg/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Ffmpeg</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/the-context-package/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>The Go context Package: Cancellation, Timeouts, and Propagation in Production</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-03T20:36:29+01:00>3 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">8 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/context/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Context</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/use-protobuf-with-golang/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Protocol Buffers in Go: Serialization, gRPC, and Performance</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2022-12-27T18:48:44+01:00>27 December 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/protobuf/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Protobuf
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/grpc/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Grpc</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article></section></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/a-quick-overview-of-elasticsearch/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Elasticsearch in Practice: Indexing, Searching, and Relevance Scoring
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-01-13T17:24:25+01:00>13 January 2023</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/the-memoization-technique/><span class=leading-6>Memoization in Go: Caching Expensive Computations Correctly&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-01-16T21:07:26+01:00>16 January 2023</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
Manuel Fedele</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://manuelfedele.github.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>