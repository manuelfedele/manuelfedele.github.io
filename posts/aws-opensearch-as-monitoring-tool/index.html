<!doctype html><html lang=en><head><title>Aws Opensearch as Monitoring Tool :: Git Push and Run</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Cross-Account Logging: Shipping AWS Lambda Logs to OpenSearch In today&rsquo;s distributed systems, logging and monitoring play a crucial role in detecting anomalies and ensuring system health. AWS Lambda and OpenSearch are often paired to deliver efficient, scalable logging solutions. However, complexities can arise when these resources live in separate AWS accounts. This blog post will guide you through the process of sending AWS Lambda logs from Account A to an OpenSearch cluster in Account B using Terraform as the Infrastructure as Code (IAC) tool and GitLab for CI/CD pipelines.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://manuelfedele.github.io/posts/aws-opensearch-as-monitoring-tool/><script async src="https://www.googletagmanager.com/gtag/js?id=G-K9P1DJX238"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K9P1DJX238")}</script><link rel=stylesheet href=https://manuelfedele.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://manuelfedele.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://manuelfedele.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://manuelfedele.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://manuelfedele.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://manuelfedele.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://manuelfedele.github.io/css/main.min.775ac2af004d44c22a6d000fbd1d9af529642f5cef27399d0280d180af2c2e9b.css><link rel=stylesheet href=https://manuelfedele.github.io/css/menu.min.310d32205bdedd6f43144e3c3273c9deecd238eba5f9108db5ea96ca0cfbe377.css><link rel=stylesheet href=https://manuelfedele.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://manuelfedele.github.io/css/post.min.ad50c7f4d00e7975918f37fc74c6029e1959a40d66fb5b2c6564a8715e985573.css><link rel=stylesheet href=https://manuelfedele.github.io/css/syntax.min.e9ab635cf918bc84b901eb65c0b2caa74c9544245e3647c1af5c129896ef276e.css><link rel=stylesheet href=https://manuelfedele.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://manuelfedele.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://manuelfedele.github.io/style.css><link rel="shortcut icon" href=https://manuelfedele.github.io/favicon.png><link rel=apple-touch-icon href=https://manuelfedele.github.io/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Aws Opensearch as Monitoring Tool"><meta property="og:description" content="Cross-Account Logging: Shipping AWS Lambda Logs to OpenSearch In today&rsquo;s distributed systems, logging and monitoring play a crucial role in detecting anomalies and ensuring system health. AWS Lambda and OpenSearch are often paired to deliver efficient, scalable logging solutions. However, complexities can arise when these resources live in separate AWS accounts. This blog post will guide you through the process of sending AWS Lambda logs from Account A to an OpenSearch cluster in Account B using Terraform as the Infrastructure as Code (IAC) tool and GitLab for CI/CD pipelines.
"><meta property="og:url" content="https://manuelfedele.github.io/posts/aws-opensearch-as-monitoring-tool/"><meta property="og:site_name" content="Git Push and Run"><meta property="og:image" content="https://manuelfedele.github.io/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-07-12 08:42:00 +0200 +0200"></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>git push && run</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>About</a></li><li><a href=/posts>Blog</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://manuelfedele.github.io/posts/aws-opensearch-as-monitoring-tool/>Aws Opensearch as Monitoring Tool</a></h1><div class=post-meta><time class=post-date>2023-07-12</time><span class=post-reading-time>5 min read (875 words)</span></div><span class=post-tags>#<a href=https://manuelfedele.github.io/tags/aws/>AWS</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/opensearch/>Opensearch</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/monitoring/>Monitoring</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/elasticsearch/>Elasticsearch</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/logging/>Logging</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/kibana/>Kibana</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/cloudwatch/>Cloudwatch</a>&nbsp;
#<a href=https://manuelfedele.github.io/tags/lambda/>Lambda</a>&nbsp;</span><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#step-1-configuring-your-aws-accounts>Step 1: Configuring Your AWS Accounts</a></li><li><a href=#step-2-set-up-opensearch-in-account-b>Step 2: Set Up OpenSearch in Account B</a></li><li><a href=#step-3-setting-up-terraform>Step 3: Setting Up Terraform</a></li><li><a href=#step-4-establishing-trust-relationship>Step 4: Establishing Trust Relationship</a></li><li><a href=#step-5-configure-aws-lambda-to-send-logs>Step 5: Configure AWS Lambda to Send Logs</a></li><li><a href=#step-6-gitlab-cicd>Step 6: GitLab CI/CD</a></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#terraform-and-gitlab-cicd-configuration>Terraform and GitLab CI/CD Configuration</a><ul><li><a href=#terraform-configuration>Terraform Configuration</a></li></ul></li></ul></nav></div><div class=post-content><div><h1 id=cross-account-logging-shipping-aws-lambda-logs-to-opensearch>Cross-Account Logging: Shipping AWS Lambda Logs to OpenSearch<a href=#cross-account-logging-shipping-aws-lambda-logs-to-opensearch class=hanchor arialabel=Anchor>#</a></h1><p>In today&rsquo;s distributed systems, logging and monitoring play a crucial role in detecting anomalies and ensuring system health. AWS Lambda and OpenSearch are often paired to deliver efficient, scalable logging solutions. However, complexities can arise when these resources live in separate AWS accounts. This blog post will guide you through the process of sending AWS Lambda logs from Account A to an OpenSearch cluster in Account B using Terraform as the Infrastructure as Code (IAC) tool and GitLab for CI/CD pipelines.</p><h2 id=prerequisites>Prerequisites<a href=#prerequisites class=hanchor arialabel=Anchor>#</a></h2><ol><li>Two AWS accounts (Account A for AWS Lambda and Account B for OpenSearch)</li><li>A GitLab account with runners provisioned on AWS for CI/CD pipelines</li><li>Terraform installed on your system</li><li>Basic understanding of AWS Lambda, OpenSearch, AWS IAM, GitLab, and Terraform</li></ol><h2 id=step-1-configuring-your-aws-accounts>Step 1: Configuring Your AWS Accounts<a href=#step-1-configuring-your-aws-accounts class=hanchor arialabel=Anchor>#</a></h2><p>Before proceeding, ensure that both AWS accounts are correctly set up, and you have the necessary access permissions. We will also need an IAM role in Account B with the necessary permissions to access the OpenSearch cluster.</p><p>In Account A, create an AWS Lambda function. Be sure to attach the necessary IAM role and policy, enabling the function to create and write logs to AWS CloudWatch.</p><h2 id=step-2-set-up-opensearch-in-account-b>Step 2: Set Up OpenSearch in Account B<a href=#step-2-set-up-opensearch-in-account-b class=hanchor arialabel=Anchor>#</a></h2><p>Next, in Account B, set up an OpenSearch cluster. The cluster should be correctly configured to receive logs from an external account. In addition, you should create an IAM role that allows the Log Stream from Account A to write to this cluster.</p><h2 id=step-3-setting-up-terraform>Step 3: Setting Up Terraform<a href=#step-3-setting-up-terraform class=hanchor arialabel=Anchor>#</a></h2><p>Terraform is a powerful tool for managing infrastructure as code. With Terraform, you can define and provide data center infrastructure using a declarative configuration language.</p><p>Create a new Terraform project and define your AWS resources, including your Lambda function and OpenSearch cluster. Be sure to use the provider alias feature of Terraform to manage resources in multiple AWS accounts.</p><p>Remember to include the necessary resource blocks, such as <code>aws_lambda_function</code> and <code>aws_elasticsearch_domain</code>, depending on your requirements.</p><h2 id=step-4-establishing-trust-relationship>Step 4: Establishing Trust Relationship<a href=#step-4-establishing-trust-relationship class=hanchor arialabel=Anchor>#</a></h2><p>Establish a trust relationship between Account A (Lambda) and Account B (OpenSearch) using an IAM role in Account B. This role should have a trust policy that allows Account A to assume it, and a permissions policy that allows writing to OpenSearch. Use the &lsquo;aws_iam_role&rsquo; and &lsquo;aws_iam_role_policy&rsquo; Terraform resources to create this.</p><h2 id=step-5-configure-aws-lambda-to-send-logs>Step 5: Configure AWS Lambda to Send Logs<a href=#step-5-configure-aws-lambda-to-send-logs class=hanchor arialabel=Anchor>#</a></h2><p>With the trust relationship set up, configure your Lambda function in Account A to send logs to CloudWatch Logs. From there, use a CloudWatch Logs subscription filter to redirect these logs to the OpenSearch cluster in Account B.</p><p>The subscription filter should use the ARN of the IAM role in Account B, allowing it to forward logs across accounts.</p><h2 id=step-6-gitlab-cicd>Step 6: GitLab CI/CD<a href=#step-6-gitlab-cicd class=hanchor arialabel=Anchor>#</a></h2><p>The final step involves integrating our setup with GitLab&rsquo;s CI/CD. We will create a pipeline that uses AWS-provisioned runners to apply our Terraform configuration, creating or updating our infrastructure.</p><p>In your GitLab repository, define a <code>.gitlab-ci.yml</code> file that describes the stages of your pipeline, including steps for &ldquo;init&rdquo;, &ldquo;validate&rdquo;, &ldquo;plan&rdquo;, and &ldquo;apply&rdquo;. Your runners will execute these steps to deploy your infrastructure.</p><h2 id=conclusion>Conclusion<a href=#conclusion class=hanchor arialabel=Anchor>#</a></h2><p>This post has covered a high-level guide on shipping AWS Lambda logs from one AWS account to an OpenSearch cluster in another. By integrating AWS services, Terraform, and GitLab, you can create a seamless logging solution that spans across multiple AWS accounts. Remember that while this setup works, it&rsquo;s crucial to tailor it to your organization&rsquo;s needs, considering factors like security, scale, and compliance. Happy logging!</p><h2 id=terraform-and-gitlab-cicd-configuration>Terraform and GitLab CI/CD Configuration<a href=#terraform-and-gitlab-cicd-configuration class=hanchor arialabel=Anchor>#</a></h2><p>Below is a basic outline of Terraform and GitLab CI/CD configurations that facilitate the shipping of AWS Lambda logs from one AWS account to an OpenSearch cluster in another.</p><h3 id=terraform-configuration>Terraform Configuration<a href=#terraform-configuration class=hanchor arialabel=Anchor>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Account A - provider.tf</span>
</span></span><span class=line><span class=cl>provider <span class=s2>&#34;aws&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>region</span>  <span class=o>=</span> <span class=s2>&#34;us-west-2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>profile</span> <span class=o>=</span> <span class=s2>&#34;accountA&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Account A - lambda.tf</span>
</span></span><span class=line><span class=cl>resource <span class=s2>&#34;aws_lambda_function&#34;</span> <span class=s2>&#34;example&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>function_name</span> <span class=o>=</span> <span class=s2>&#34;example&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>filename</span>         <span class=o>=</span> <span class=s2>&#34;lambda_function_payload.zip&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>source_code_hash</span> <span class=o>=</span> filebase64sha256<span class=o>(</span><span class=s2>&#34;lambda_function_payload.zip&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=nv>handler</span>          <span class=o>=</span> <span class=s2>&#34;exports.test&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>role</span>             <span class=o>=</span> aws_iam_role.lambda_exec.arn
</span></span><span class=line><span class=cl>  <span class=nv>runtime</span>          <span class=o>=</span> <span class=s2>&#34;nodejs12.x&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>publish</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>resource <span class=s2>&#34;aws_iam_role&#34;</span> <span class=s2>&#34;lambda_exec&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;lambda_exec_role&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>assume_role_policy</span> <span class=o>=</span> <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>{
</span></span></span><span class=line><span class=cl><span class=s>  &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;Statement&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Action&#34;: &#34;sts:AssumeRole&#34;,
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Principal&#34;: {
</span></span></span><span class=line><span class=cl><span class=s>        &#34;Service&#34;: &#34;lambda.amazonaws.com&#34;
</span></span></span><span class=line><span class=cl><span class=s>      },
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Sid&#34;: &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>  ]
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>resource <span class=s2>&#34;aws_cloudwatch_log_group&#34;</span> <span class=s2>&#34;example&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>name</span>              <span class=o>=</span> <span class=s2>&#34;/aws/lambda/</span><span class=si>${</span><span class=nv>aws_lambda_function</span><span class=p>.example.function_name</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>retention_in_days</span> <span class=o>=</span> <span class=m>14</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Account B - provider.tf</span>
</span></span><span class=line><span class=cl>provider <span class=s2>&#34;aws&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>region</span>  <span class=o>=</span> <span class=s2>&#34;us-west-2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>profile</span> <span class=o>=</span> <span class=s2>&#34;accountB&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>alias</span>   <span class=o>=</span> <span class=s2>&#34;accountB&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Account B - opensearch.tf</span>
</span></span><span class=line><span class=cl>provider <span class=s2>&#34;aws&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>alias</span>  <span class=o>=</span> <span class=s2>&#34;accountB&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>region</span> <span class=o>=</span> <span class=s2>&#34;us-west-2&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>resource <span class=s2>&#34;aws_elasticsearch_domain&#34;</span> <span class=s2>&#34;example&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>provider</span>                  <span class=o>=</span> aws.accountB
</span></span><span class=line><span class=cl>  <span class=nv>domain_name</span>               <span class=o>=</span> <span class=s2>&#34;example&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>elasticsearch_version</span>     <span class=o>=</span> <span class=s2>&#34;7.1&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>resource <span class=s2>&#34;aws_iam_role&#34;</span> <span class=s2>&#34;cross_account_role&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;cross_account_role&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>assume_role_policy</span> <span class=o>=</span> <span class=s>&lt;&lt;POLICY
</span></span></span><span class=line><span class=cl><span class=s>{
</span></span></span><span class=line><span class=cl><span class=s>  &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;Statement&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Sid&#34;: &#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Principal&#34;: {
</span></span></span><span class=line><span class=cl><span class=s>        &#34;AWS&#34;: &#34;arn:aws:iam::&lt;AccountA_ID&gt;:root&#34;
</span></span></span><span class=line><span class=cl><span class=s>      },
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Action&#34;: &#34;sts:AssumeRole&#34;
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>  ]
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>POLICY</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>resource <span class=s2>&#34;aws_iam_role_policy&#34;</span> <span class=s2>&#34;policy&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;cross_account_policy&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>role</span> <span class=o>=</span> aws_iam_role.cross_account_role.id
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>policy</span> <span class=o>=</span> <span class=s>&lt;&lt;POLICY
</span></span></span><span class=line><span class=cl><span class=s>{
</span></span></span><span class=line><span class=cl><span class=s>  &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span class=line><span class=cl><span class=s>  &#34;Statement&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Action&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>        &#34;es:*&#34;
</span></span></span><span class=line><span class=cl><span class=s>      ],
</span></span></span><span class=line><span class=cl><span class=s>      &#34;Resource&#34;: &#34;${aws_elasticsearch_domain.example.arn}/*&#34;
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>  ]
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>POLICY</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># GitLab - .gitlab-ci.yml</span>
</span></span><span class=line><span class=cl>stages:
</span></span><span class=line><span class=cl>  - init
</span></span><span class=line><span class=cl>  - validate
</span></span><span class=line><span class=cl>  - plan
</span></span><span class=line><span class=cl>  - apply
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>variables:
</span></span><span class=line><span class=cl>  AWS_DEFAULT_REGION: <span class=s2>&#34;us-west-2&#34;</span>
</span></span><span class=line><span class=cl>  AWS_ACCESS_KEY_ID: <span class=s2>&#34;&lt;access_key&gt;&#34;</span>
</span></span><span class=line><span class=cl>  AWS_SECRET_ACCESS_KEY: <span class=s2>&#34;&lt;secret_key&gt;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>init:
</span></span><span class=line><span class=cl>  stage: init
</span></span><span class=line><span class=cl>  script:
</span></span><span class=line><span class=cl>    - terraform init
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>validate:
</span></span><span class=line><span class=cl>  stage: validate
</span></span><span class=line><span class=cl>  script:
</span></span><span class=line><span class=cl>    - terraform validate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>plan:
</span></span><span class=line><span class=cl>  stage: plan
</span></span><span class=line><span class=cl>  script:
</span></span><span class=line><span class=cl>    - terraform plan
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>apply:
</span></span><span class=line><span class=cl>  stage: apply
</span></span><span class=line><span class=cl>  script:
</span></span><span class=line><span class=cl>    - terraform apply -auto-approve
</span></span></code></pre></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><a href=https://manuelfedele.github.io/posts/clipboard-watch-remove-accidentally-typed-passwords/ class="button inline prev">&lt; [<span class=button__text>Clipboard Watch Remove Accidentally Typed Passwords</span>]
</a>::
<a href=https://manuelfedele.github.io/posts/the-single-responsibility-principle/ class="button inline next">[<span class=button__text>The Single Responsibility Principle</span>] ></a></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2026 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>