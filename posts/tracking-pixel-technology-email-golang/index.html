<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR &#183; Git Push and Run</title><meta name=title content="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR &#183; Git Push and Run"><meta name=description content="Software Engineer and Cloud Architect writing about Go, Python, AWS, and AI automation."><meta name=keywords content="golang,email,tracking,"><link rel=canonical href=https://manuelfedele.github.io/posts/tracking-pixel-technology-email-golang/><meta name=author content="Manuel Fedele"><link href=https://github.com/manuelfedele rel=me><link href=https://linkedin.com/in/manuel-fedele rel=me><meta property="og:url" content="https://manuelfedele.github.io/posts/tracking-pixel-technology-email-golang/"><meta property="og:site_name" content="Git Push and Run"><meta property="og:title" content="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR"><meta property="og:description" content="A tracking pixel is a 1x1 transparent image embedded in an HTML email. When an email client renders the image, it fires an HTTP GET request to your server – logging the open event. Used correctly, tracking pixels power read receipts, delivery confirmation, and engagement analytics for transactional and marketing emails. Used carelessly, they violate GDPR and produce misleading metrics. This post covers a production-correct Go implementation with per-recipient unique URLs, an honest discussion of what the data actually measures, and the compliance obligations you cannot skip. How It Works # The mechanism is simple, but the details matter for accuracy and compliance."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-22T19:02:19+01:00"><meta property="article:modified_time" content="2023-01-22T19:02:19+01:00"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Email"><meta property="article:tag" content="Tracking"><meta name=twitter:card content="summary"><meta name=twitter:title content="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR"><meta name=twitter:description content="A tracking pixel is a 1x1 transparent image embedded in an HTML email. When an email client renders the image, it fires an HTTP GET request to your server – logging the open event. Used correctly, tracking pixels power read receipts, delivery confirmation, and engagement analytics for transactional and marketing emails. Used carelessly, they violate GDPR and produce misleading metrics. This post covers a production-correct Go implementation with per-recipient unique URLs, an honest discussion of what the data actually measures, and the compliance obligations you cannot skip. How It Works # The mechanism is simple, but the details matter for accuracy and compliance."><link type=text/css rel=stylesheet href=/css/main.bundle.min.726dfbf42bcd66e35e2d7258d72fe8fe77509ff76d153e2b46cdbae9c3af9620653459f0119a72d2af4a9b4bc446652d244ad58743d0290e5d8e09e3983b98e5.css integrity="sha512-cm379CvNZuNeLXJY1y/o/ndQn/dtFT4rRs266cOvliBlNFnwEZpy0q9Km0vERmUtJErVh0PQKQ5djgnjmDuY5Q=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.88278edec77139635e1ad294df5b32b7be9338191c5252d3f6f451ace5852d5f82390cccacedab9c64739d8e068b7e8502895cf8f951060c0368f9a73709fcb7.js integrity="sha512-iCeO3sdxOWNeGtKU31syt76TOBkcUlLT9vRRrOWFLV+COQzMrO2rnGRznY4Gi36FAolc+PlRBgwDaPmnNwn8tw==" data-copy=Copy data-copied=Copied></script><script defer type=text/javascript src=/js/mermaid.bundle.c63c50c6884d5e5a17085b7ea24a2ef1f2c96af692b3e243dfab2ab9ef6e6c045a111b16d5cd3ce4d3f1a4919e6a86c4d49c16f5cf9b44db6dd7f6ffbc8d4b49.js integrity="sha512-xjxQxohNXloXCFt+okou8fLJavaSs+JD36sque9ubARaERsW1c085NPxpJGeaobE1JwW9c+bRNtt1/b/vI1LSQ=="></script><script src=/js/shortcodes/tabs.min.b9b8a6b2cf6c81163025e44a18c0ccce600efe2dfc29d2d11515fe41b8e1e8e00896759b9e55eab7032ab15d1bec124c32e8996685e563de84ad243eb61ec236.js integrity="sha512-ubimss9sgRYwJeRKGMDMzmAO/i38KdLRFRX+Qbjh6OAIlnWbnlXqtwMqsV0b7BJMMuiZZoXlY96ErSQ+th7CNg==" crossorigin=anonymous></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR","headline":"Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR","inLanguage":"en","url":"https://manuelfedele.github.io/posts/tracking-pixel-technology-email-golang/","author":{"@type":"Person","name":"Manuel Fedele"},"copyrightYear":"2023","dateCreated":"2023-01-22T19:02:19\u002b01:00","datePublished":"2023-01-22T19:02:19\u002b01:00","dateModified":"2023-01-22T19:02:19\u002b01:00","keywords":["golang","email","tracking"],"mainEntityOfPage":"true","wordCount":"1896"}]</script></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl bg-neutral/25 dark:bg-neutral-800/25"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><a href=/ class="text-base font-medium truncate min-w-0 shrink">Git Push and Run</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><a href=/posts/ class="flex items-center bf-icon-color-hover" aria-label=Blog title=Posts><span class="text-base font-medium break-normal">Blog
</span></a><a href=/about/ class="flex items-center bf-icon-color-hover" aria-label=About title=About><span class="text-base font-medium break-normal">About
</span></a><a href=/coaching/ class="flex items-center bf-icon-color-hover" aria-label=Coaching title=Coaching><span class="text-base font-medium break-normal">Coaching
</span></a><a href=https://github.com/manuelfedele target=_blank class="flex items-center bf-icon-color-hover" aria-label=github title><span><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/tracking-pixel-technology-email-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR">EN
</span></a><a href=/it/posts/tracking-pixel-technology-email-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Email Open Tracking con Go: Tracking Pixel, URL Univoci e GDPR">IT</span></a></li></ul></div><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<input type=checkbox id=mobile-menu-toggle autocomplete=off class="hidden peer">
<label for=mobile-menu-toggle class="flex items-center justify-center cursor-pointer bf-icon-color-hover"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></label><div role=dialog aria-modal=true style=scrollbar-gutter:stable class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
bf-scrollbar"><label for=mobile-menu-toggle class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></label><nav class="mx-auto max-w-md space-y-6"><div class=px-2><a href=/posts/ aria-label=Blog class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Posts class="text-2xl font-bold tracking-tight">Blog</span></a></div><div class=px-2><a href=/about/ aria-label=About class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=About class="text-2xl font-bold tracking-tight">About</span></a></div><div class=px-2><a href=/coaching/ aria-label=Coaching class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Coaching class="text-2xl font-bold tracking-tight">Coaching</span></a></div><div class=px-2><a href=https://github.com/manuelfedele aria-label=github target=_blank class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span><span title class="text-2xl font-bold tracking-tight"></span></a></div><div class="flex flex-wrap items-center [&_span]:text-2xl [&_.translation_button_.icon]:text-4xl! [&_.translation_button_span]:text-base! [&_.translation_.menuhide_span]:text-sm! gap-x-6 ps-2 mt-8 pt-8 border-t bf-border-color"><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/tracking-pixel-technology-email-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR">EN
</span></a><a href=/it/posts/tracking-pixel-technology-email-golang/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Email Open Tracking con Go: Tracking Pixel, URL Univoci e GDPR">IT</span></a></li></ul></div></div></nav></div></div></div></div></div><script>(function(){var t,n,e=document.querySelector(".main-menu");if(!e)return;t=window.location.pathname,n=e.querySelectorAll('a[href="'+t+'"]'),n.forEach(function(e){var t=e.querySelectorAll("span");t.forEach(function(e){e.classList.add("active")})})})()</script></div></div><script type=text/javascript src=/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"><img id=background-image src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=1200&amp;q=85" role=presentation loading=eager decoding=async fetchpriority=high class="absolute inset-0 w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-xl bg-neutral-100/75 dark:bg-neutral-800/60"></div><script type=text/javascript src=/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=background-blur data-image-id=background-image data-image-url="https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=1200&amp;q=85"></script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Email Open Tracking with Go: Tracking Pixels, Unique URLs, and GDPR</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-22T19:02:19+01:00>22 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">9 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/email/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Email
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/tracking/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Tracking</span></span></a></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#how-it-works>How It Works</a></li><li><a href=#the-naive-implementation-and-its-flaws>The Naive Implementation (and Its Flaws)</a></li><li><a href=#unique-per-recipient-urls>Unique Per-Recipient URLs</a></li><li><a href=#complete-tracking-server>Complete Tracking Server</a></li><li><a href=#html-email-template-with-tracking-pixel>HTML Email Template with Tracking Pixel</a></li><li><a href=#email-client-reality-image-blocking>Email Client Reality: Image Blocking</a></li><li><a href=#gdpr-compliance>GDPR Compliance</a></li><li><a href=#production-considerations>Production Considerations</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#how-it-works>How It Works</a></li><li><a href=#the-naive-implementation-and-its-flaws>The Naive Implementation (and Its Flaws)</a></li><li><a href=#unique-per-recipient-urls>Unique Per-Recipient URLs</a></li><li><a href=#complete-tracking-server>Complete Tracking Server</a></li><li><a href=#html-email-template-with-tracking-pixel>HTML Email Template with Tracking Pixel</a></li><li><a href=#email-client-reality-image-blocking>Email Client Reality: Image Blocking</a></li><li><a href=#gdpr-compliance>GDPR Compliance</a></li><li><a href=#production-considerations>Production Considerations</a></li></ul></nav></div></details><script>(function(){"use strict";const s=.33,o="#TableOfContents",i=".anchor",a='a[href^="#"]',r="li ul",c="active";let t=!1;function l(e,n){const o=window.scrollY+window.innerHeight*n,i=[...document.querySelectorAll('#TableOfContents a[href^="#"]')],s=new Set(i.map(e=>e.getAttribute("href").substring(1)));if(t)for(let t=0;t<e.length;t++){const n=e[t];if(!s.has(n.id))continue;const o=n.getBoundingClientRect().top+window.scrollY;if(Math.abs(window.scrollY-o)<100)return n.id}for(let t=e.length-1;t>=0;t--){const n=e[t].getBoundingClientRect().top+window.scrollY;if(n<=o&&s.has(e[t].id))return e[t].id}return e.find(e=>s.has(e.id))?.id||""}function e({toc:e,anchors:t,links:n,scrollOffset:s,collapseInactive:o}){const i=l(t,s);if(!i)return;if(n.forEach(e=>{const t=e.getAttribute("href")===`#${i}`;if(e.classList.toggle(c,t),o){const n=e.closest("li")?.querySelector("ul");n&&(n.style.display=t?"":"none")}}),o){const n=e.querySelector(`a[href="#${CSS.escape(i)}"]`);let t=n;for(;t&&t!==e;)t.tagName==="UL"&&(t.style.display=""),t.tagName==="LI"&&t.querySelector("ul")?.style.setProperty("display",""),t=t.parentElement}}function n(){const n=document.querySelector(o);if(!n)return;const l=!0,u=[...document.querySelectorAll(i)],d=[...n.querySelectorAll(a)];l&&n.querySelectorAll(r).forEach(e=>e.style.display="none"),d.forEach(e=>{e.addEventListener("click",()=>{t=!0})});const c={toc:n,anchors:u,links:d,scrollOffset:s,collapseInactive:l};window.addEventListener("scroll",()=>e(c),{passive:!0}),window.addEventListener("hashchange",()=>e(c),{passive:!0}),e(c)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><div class="lead text-neutral-500 dark:text-neutral-400 !mb-9 text-xl">A tracking pixel is a 1x1 transparent image embedded in an HTML email. When an email client renders the image, it fires an HTTP GET request to your server &ndash; logging the open event. Used correctly, tracking pixels power read receipts, delivery confirmation, and engagement analytics for transactional and marketing emails. Used carelessly, they violate GDPR and produce misleading metrics. This post covers a production-correct Go implementation with per-recipient unique URLs, an honest discussion of what the data actually measures, and the compliance obligations you cannot skip.</div><h2 class="relative group">How It Works<div id=how-it-works class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#how-it-works aria-label=Anchor>#</a></span></h2><p>The mechanism is simple, but the details matter for accuracy and compliance.</p><pre class="not-prose mermaid">
sequenceDiagram
    participant S as Sender (Go server)
    participant MTA as Mail Transfer Agent
    participant C as Email Client
    participant T as Tracking Server

    S->>S: Generate UUID for recipient
    S->>S: Build HTML email with img src=tracking URL
    S->>MTA: Send email via SMTP
    MTA->>C: Deliver email to inbox
    C->>C: User opens email
    C->>T: GET /pixel/{uuid}.png
    T->>T: Look up UUID, record open event
    T->>C: 200 OK with 1x1 transparent PNG
</pre><p>The tracking server must serve the pixel in every case, including when the UUID is not recognized. Returning a 404 causes some email clients to retry indefinitely, inflating your open counts and hammering your server.</p><h2 class="relative group">The Naive Implementation (and Its Flaws)<div id=the-naive-implementation-and-its-flaws class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#the-naive-implementation-and-its-flaws aria-label=Anchor>#</a></span></h2><p>The original version of this post had a critical syntax error: <code>http.ListenAndServe</code> was placed inside the handler function&rsquo;s closure body, which means it only runs when a request arrives &ndash; and the handler never returns, hanging indefinitely on the first request. Here is the corrected minimal version first:</p><div class=highlight-wrapper><div class=codeblock-title>pixel_server_naive.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;log&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;time&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>main</span><span style=color:#eceff4>()</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    http<span style=color:#eceff4>.</span><span style=color:#88c0d0>HandleFunc</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;/pixel.png&#34;</span><span style=color:#eceff4>,</span> pixelHandler<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// ListenAndServe must be at the top level of main, not inside a handler.</span>
</span></span><span style=display:flex><span>    log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Fatal</span><span style=color:#eceff4>(</span>http<span style=color:#eceff4>.</span><span style=color:#88c0d0>ListenAndServe</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;:8080&#34;</span><span style=color:#eceff4>,</span> <span style=color:#81a1c1;font-weight:700>nil</span><span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>pixelHandler</span><span style=color:#eceff4>(</span>w http<span style=color:#eceff4>.</span>ResponseWriter<span style=color:#eceff4>,</span> r <span style=color:#81a1c1>*</span>http<span style=color:#eceff4>.</span>Request<span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    log<span style=color:#eceff4>.</span><span style=color:#88c0d0>Printf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;open event from %s user-agent=%s&#34;</span><span style=color:#eceff4>,</span> r<span style=color:#eceff4>.</span>RemoteAddr<span style=color:#eceff4>,</span> r<span style=color:#eceff4>.</span><span style=color:#88c0d0>UserAgent</span><span style=color:#eceff4>())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Content-Type&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;image/png&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Cache-Control&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;no-cache, no-store, must-revalidate&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Expires&#34;</span><span style=color:#eceff4>,</span> time<span style=color:#eceff4>.</span><span style=color:#88c0d0>Now</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>UTC</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Format</span><span style=color:#eceff4>(</span>http<span style=color:#eceff4>.</span>TimeFormat<span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Serve a 1x1 transparent PNG (base64-decoded inline to avoid filesystem dependency).</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Write</span><span style=color:#eceff4>(</span>transparentPNG<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// transparentPNG is the smallest valid 1x1 transparent PNG (67 bytes).</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> transparentPNG <span style=color:#eceff4>=</span> <span style=color:#eceff4>[]</span><span style=color:#81a1c1>byte</span><span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x89</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x50</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x4e</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x47</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0d</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0a</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x1a</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0a</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0d</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x49</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x48</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x44</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x52</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x01</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x01</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x08</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x06</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x1f</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x15</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0xc4</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x89</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0a</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x49</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x44</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x41</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x54</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x78</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x9c</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x62</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x01</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x05</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x01</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0d</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x0a</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x2d</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0xb4</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x00</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x49</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x45</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x4e</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x44</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0xae</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>    <span style=color:#b48ead>0x42</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x60</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>0x82</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><p>This works, but it is useless for production: every request looks identical. You cannot tell which recipient opened the email, how many unique opens there were, or whether a single user opened it multiple times.</p><h2 class="relative group">Unique Per-Recipient URLs<div id=unique-per-recipient-urls class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#unique-per-recipient-urls aria-label=Anchor>#</a></span></h2><p>The entire value of tracking pixels comes from giving each recipient a unique URL. The server maps the URL&rsquo;s UUID back to the recipient at open time.</p><div class=highlight-wrapper><div class=codeblock-title>tracker/store.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> tracker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;sync&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;time&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// TrackingRecord stores metadata about a single email send.</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>type</span> TrackingRecord <span style=color:#81a1c1;font-weight:700>struct</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    RecipientEmail <span style=color:#81a1c1>string</span>
</span></span><span style=display:flex><span>    Subject        <span style=color:#81a1c1>string</span>
</span></span><span style=display:flex><span>    SentAt         time<span style=color:#eceff4>.</span>Time
</span></span><span style=display:flex><span>    FirstOpenAt    <span style=color:#81a1c1>*</span>time<span style=color:#eceff4>.</span>Time
</span></span><span style=display:flex><span>    OpenCount      <span style=color:#81a1c1>int</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// Store is an in-memory open tracking store.</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// In production, replace with a database (PostgreSQL, Redis, DynamoDB).</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>type</span> Store <span style=color:#81a1c1;font-weight:700>struct</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    mu      sync<span style=color:#eceff4>.</span>RWMutex
</span></span><span style=display:flex><span>    records <span style=color:#81a1c1;font-weight:700>map</span><span style=color:#eceff4>[</span><span style=color:#81a1c1>string</span><span style=color:#eceff4>]</span><span style=color:#81a1c1>*</span>TrackingRecord <span style=color:#616e87;font-style:italic>// key: UUID</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>NewStore</span><span style=color:#eceff4>()</span> <span style=color:#81a1c1>*</span>Store <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1>&amp;</span>Store<span style=color:#eceff4>{</span>records<span style=color:#eceff4>:</span> <span style=color:#81a1c1>make</span><span style=color:#eceff4>(</span><span style=color:#81a1c1;font-weight:700>map</span><span style=color:#eceff4>[</span><span style=color:#81a1c1>string</span><span style=color:#eceff4>]</span><span style=color:#81a1c1>*</span>TrackingRecord<span style=color:#eceff4>)}</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// Register creates a new tracking record and returns its UUID.</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#eceff4>(</span>s <span style=color:#81a1c1>*</span>Store<span style=color:#eceff4>)</span> <span style=color:#88c0d0>Register</span><span style=color:#eceff4>(</span>uuid<span style=color:#eceff4>,</span> recipient<span style=color:#eceff4>,</span> subject <span style=color:#81a1c1>string</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    s<span style=color:#eceff4>.</span>mu<span style=color:#eceff4>.</span><span style=color:#88c0d0>Lock</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>defer</span> s<span style=color:#eceff4>.</span>mu<span style=color:#eceff4>.</span><span style=color:#88c0d0>Unlock</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    s<span style=color:#eceff4>.</span>records<span style=color:#eceff4>[</span>uuid<span style=color:#eceff4>]</span> <span style=color:#eceff4>=</span> <span style=color:#81a1c1>&amp;</span>TrackingRecord<span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        RecipientEmail<span style=color:#eceff4>:</span> recipient<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        Subject<span style=color:#eceff4>:</span>        subject<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        SentAt<span style=color:#eceff4>:</span>         time<span style=color:#eceff4>.</span><span style=color:#88c0d0>Now</span><span style=color:#eceff4>(),</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// RecordOpen marks the tracking record as opened. Thread-safe.</span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// Returns the record, or nil if the UUID is unknown.</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#eceff4>(</span>s <span style=color:#81a1c1>*</span>Store<span style=color:#eceff4>)</span> <span style=color:#88c0d0>RecordOpen</span><span style=color:#eceff4>(</span>uuid <span style=color:#81a1c1>string</span><span style=color:#eceff4>)</span> <span style=color:#81a1c1>*</span>TrackingRecord <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    s<span style=color:#eceff4>.</span>mu<span style=color:#eceff4>.</span><span style=color:#88c0d0>Lock</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>defer</span> s<span style=color:#eceff4>.</span>mu<span style=color:#eceff4>.</span><span style=color:#88c0d0>Unlock</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    rec<span style=color:#eceff4>,</span> ok <span style=color:#81a1c1>:=</span> s<span style=color:#eceff4>.</span>records<span style=color:#eceff4>[</span>uuid<span style=color:#eceff4>]</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> <span style=color:#eceff4>!</span>ok <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>return</span> <span style=color:#81a1c1;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    now <span style=color:#81a1c1>:=</span> time<span style=color:#eceff4>.</span><span style=color:#88c0d0>Now</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> rec<span style=color:#eceff4>.</span>FirstOpenAt <span style=color:#81a1c1>==</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        rec<span style=color:#eceff4>.</span>FirstOpenAt <span style=color:#eceff4>=</span> <span style=color:#81a1c1>&amp;</span>now
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>    rec<span style=color:#eceff4>.</span>OpenCount<span style=color:#81a1c1>++</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> rec
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><h2 class="relative group">Complete Tracking Server<div id=complete-tracking-server class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#complete-tracking-server aria-label=Anchor>#</a></span></h2><div class=highlight-wrapper><div class=codeblock-title>tracker/server.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> tracker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;log/slog&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;strings&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;time&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>type</span> Server <span style=color:#81a1c1;font-weight:700>struct</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    store <span style=color:#81a1c1>*</span>Store
</span></span><span style=display:flex><span>    mux   <span style=color:#81a1c1>*</span>http<span style=color:#eceff4>.</span>ServeMux
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>NewServer</span><span style=color:#eceff4>(</span>store <span style=color:#81a1c1>*</span>Store<span style=color:#eceff4>)</span> <span style=color:#81a1c1>*</span>Server <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    s <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1>&amp;</span>Server<span style=color:#eceff4>{</span>store<span style=color:#eceff4>:</span> store<span style=color:#eceff4>,</span> mux<span style=color:#eceff4>:</span> http<span style=color:#eceff4>.</span><span style=color:#88c0d0>NewServeMux</span><span style=color:#eceff4>()}</span>
</span></span><span style=display:flex><span>    s<span style=color:#eceff4>.</span>mux<span style=color:#eceff4>.</span><span style=color:#88c0d0>HandleFunc</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;/pixel/&#34;</span><span style=color:#eceff4>,</span> s<span style=color:#eceff4>.</span>handlePixel<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> s
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#eceff4>(</span>s <span style=color:#81a1c1>*</span>Server<span style=color:#eceff4>)</span> <span style=color:#88c0d0>ServeHTTP</span><span style=color:#eceff4>(</span>w http<span style=color:#eceff4>.</span>ResponseWriter<span style=color:#eceff4>,</span> r <span style=color:#81a1c1>*</span>http<span style=color:#eceff4>.</span>Request<span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    s<span style=color:#eceff4>.</span>mux<span style=color:#eceff4>.</span><span style=color:#88c0d0>ServeHTTP</span><span style=color:#eceff4>(</span>w<span style=color:#eceff4>,</span> r<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>// handlePixel handles GET /pixel/{uuid}.png</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#eceff4>(</span>s <span style=color:#81a1c1>*</span>Server<span style=color:#eceff4>)</span> <span style=color:#88c0d0>handlePixel</span><span style=color:#eceff4>(</span>w http<span style=color:#eceff4>.</span>ResponseWriter<span style=color:#eceff4>,</span> r <span style=color:#81a1c1>*</span>http<span style=color:#eceff4>.</span>Request<span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Extract UUID from path: /pixel/550e8400-e29b-41d4-a716-446655440000.png</span>
</span></span><span style=display:flex><span>    path <span style=color:#81a1c1>:=</span> strings<span style=color:#eceff4>.</span><span style=color:#88c0d0>TrimPrefix</span><span style=color:#eceff4>(</span>r<span style=color:#eceff4>.</span>URL<span style=color:#eceff4>.</span>Path<span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;/pixel/&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    uuid <span style=color:#81a1c1>:=</span> strings<span style=color:#eceff4>.</span><span style=color:#88c0d0>TrimSuffix</span><span style=color:#eceff4>(</span>path<span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;.png&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rec <span style=color:#81a1c1>:=</span> s<span style=color:#eceff4>.</span>store<span style=color:#eceff4>.</span><span style=color:#88c0d0>RecordOpen</span><span style=color:#eceff4>(</span>uuid<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> rec <span style=color:#81a1c1>!=</span> <span style=color:#81a1c1;font-weight:700>nil</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        slog<span style=color:#eceff4>.</span><span style=color:#88c0d0>Info</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;email opened&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;uuid&#34;</span><span style=color:#eceff4>,</span> uuid<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;recipient&#34;</span><span style=color:#eceff4>,</span> rec<span style=color:#eceff4>.</span>RecipientEmail<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;subject&#34;</span><span style=color:#eceff4>,</span> rec<span style=color:#eceff4>.</span>Subject<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;open_count&#34;</span><span style=color:#eceff4>,</span> rec<span style=color:#eceff4>.</span>OpenCount<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;user_agent&#34;</span><span style=color:#eceff4>,</span> r<span style=color:#eceff4>.</span><span style=color:#88c0d0>UserAgent</span><span style=color:#eceff4>(),</span>
</span></span><span style=display:flex><span>            <span style=color:#a3be8c>&#34;remote_addr&#34;</span><span style=color:#eceff4>,</span> r<span style=color:#eceff4>.</span>RemoteAddr<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        <span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span> <span style=color:#81a1c1;font-weight:700>else</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>        slog<span style=color:#eceff4>.</span><span style=color:#88c0d0>Warn</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;unknown tracking UUID&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;uuid&#34;</span><span style=color:#eceff4>,</span> uuid<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Always serve the pixel -- even for unknown UUIDs.</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Returning 404 causes retry storms from aggressive email clients.</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Content-Type&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;image/png&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Cache-Control&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;no-cache, no-store, must-revalidate&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Pragma&#34;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#34;no-cache&#34;</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Header</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Set</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;Expires&#34;</span><span style=color:#eceff4>,</span> time<span style=color:#eceff4>.</span><span style=color:#88c0d0>Now</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>UTC</span><span style=color:#eceff4>().</span><span style=color:#88c0d0>Format</span><span style=color:#eceff4>(</span>http<span style=color:#eceff4>.</span>TimeFormat<span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>WriteHeader</span><span style=color:#eceff4>(</span>http<span style=color:#eceff4>.</span>StatusOK<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    w<span style=color:#eceff4>.</span><span style=color:#88c0d0>Write</span><span style=color:#eceff4>(</span>transparentPNG<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><p>Generating a UUID per send and registering the tracking record:</p><div class=highlight-wrapper><div class=codeblock-title>mailer/send.go</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>package</span> mailer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>import</span> <span style=color:#eceff4>(</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;crypto/rand&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a3be8c>&#34;tracker&#34;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>newUUID</span><span style=color:#eceff4>()</span> <span style=color:#81a1c1>string</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    b <span style=color:#81a1c1>:=</span> <span style=color:#81a1c1>make</span><span style=color:#eceff4>([]</span><span style=color:#81a1c1>byte</span><span style=color:#eceff4>,</span> <span style=color:#b48ead>16</span><span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    rand<span style=color:#eceff4>.</span><span style=color:#88c0d0>Read</span><span style=color:#eceff4>(</span>b<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Sprintf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;%08x-%04x-%04x-%04x-%12x&#34;</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>        b<span style=color:#eceff4>[</span><span style=color:#b48ead>0</span><span style=color:#eceff4>:</span><span style=color:#b48ead>4</span><span style=color:#eceff4>],</span> b<span style=color:#eceff4>[</span><span style=color:#b48ead>4</span><span style=color:#eceff4>:</span><span style=color:#b48ead>6</span><span style=color:#eceff4>],</span> b<span style=color:#eceff4>[</span><span style=color:#b48ead>6</span><span style=color:#eceff4>:</span><span style=color:#b48ead>8</span><span style=color:#eceff4>],</span> b<span style=color:#eceff4>[</span><span style=color:#b48ead>8</span><span style=color:#eceff4>:</span><span style=color:#b48ead>10</span><span style=color:#eceff4>],</span> b<span style=color:#eceff4>[</span><span style=color:#b48ead>10</span><span style=color:#eceff4>:])</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> <span style=color:#88c0d0>SendTrackedEmail</span><span style=color:#eceff4>(</span>store <span style=color:#81a1c1>*</span>tracker<span style=color:#eceff4>.</span>Store<span style=color:#eceff4>,</span> recipient<span style=color:#eceff4>,</span> subject<span style=color:#eceff4>,</span> baseURL <span style=color:#81a1c1>string</span><span style=color:#eceff4>)</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    uuid <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>newUUID</span><span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    store<span style=color:#eceff4>.</span><span style=color:#88c0d0>Register</span><span style=color:#eceff4>(</span>uuid<span style=color:#eceff4>,</span> recipient<span style=color:#eceff4>,</span> subject<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pixelURL <span style=color:#81a1c1>:=</span> fmt<span style=color:#eceff4>.</span><span style=color:#88c0d0>Sprintf</span><span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;%s/pixel/%s.png&#34;</span><span style=color:#eceff4>,</span> baseURL<span style=color:#eceff4>,</span> uuid<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    html <span style=color:#81a1c1>:=</span> <span style=color:#88c0d0>buildEmailHTML</span><span style=color:#eceff4>(</span>subject<span style=color:#eceff4>,</span> pixelURL<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic>// Send html via your SMTP library here.</span>
</span></span><span style=display:flex><span>    _ <span style=color:#eceff4>=</span> html
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div></div><h2 class="relative group">HTML Email Template with Tracking Pixel<div id=html-email-template-with-tracking-pixel class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#html-email-template-with-tracking-pixel aria-label=Anchor>#</a></span></h2><p>The pixel must be the last element inside the <code>&lt;body></code> to maximize the chance that it loads even when the user scrolls to the bottom and the email client loads images progressively.</p><div class=highlight-wrapper><div class=codeblock-title>email_template.html</div><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#5e81ac;font-style:italic>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>html</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>head</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>meta</span> <span style=color:#8fbcbb>charset</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#34;UTF-8&#34;</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>title</span><span style=color:#eceff4>&gt;</span>{{.Subject}}<span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>title</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>head</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>body</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>p</span><span style=color:#eceff4>&gt;</span>Hello {{.RecipientName}},<span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>p</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>p</span><span style=color:#eceff4>&gt;</span>{{.Body}}<span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>p</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>p</span><span style=color:#eceff4>&gt;</span>Best regards,<span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>br</span><span style=color:#eceff4>&gt;</span>The Team<span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>p</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#616e87;font-style:italic>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>    Tracking pixel: 1x1 transparent PNG.
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>    width/height=1 prevents layout shift.
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>    alt=&#34;&#34; prevents screen readers from announcing it.
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>    Placed at the end of body to avoid blocking render.
</span></span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic>  --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>img</span> <span style=color:#8fbcbb>src</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#34;{{.PixelURL}}&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#8fbcbb>width</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#34;1&#34;</span> <span style=color:#8fbcbb>height</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#34;1&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#8fbcbb>alt</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#34;&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#8fbcbb>style</span><span style=color:#81a1c1>=</span><span style=color:#a3be8c>&#34;display:block;width:1px;height:1px;border:0;&#34;</span> <span style=color:#eceff4>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>body</span><span style=color:#eceff4>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>&lt;/</span><span style=color:#81a1c1>html</span><span style=color:#eceff4>&gt;</span></span></span></code></pre></div></div><div class="admonition relative overflow-hidden rounded-lg border-l-4 my-3 px-4 py-3 shadow-sm" data-type=important><div class="flex items-center gap-2 font-semibold text-inherit"><div class="flex shrink-0 h-5 w-5 items-center justify-center text-lg"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M287.9.0C297.1.0 305.5 5.25 309.5 13.52L378.1 154.8l153.3 22.7C540.4 178.8 547.8 185.1 550.7 193.7 553.5 202.4 551.2 211.9 544.8 218.2L433.6 328.4l26.3 155.5C461.4 492.9 457.7 502.1 450.2 507.4 442.8 512.7 432.1 513.4 424.9 509.1L287.9 435.9 150.1 509.1C142.9 513.4 133.1 512.7 125.6 507.4 118.2 502.1 114.5 492.9 115.1 483.9l27.1-155.5L31.11 218.2C24.65 211.9 22.36 202.4 25.2 193.7 28.03 185.1 35.5 178.8 44.49 177.5L197.7 154.8 266.3 13.52C270.4 5.249 278.7.0 287.9.0zm0 78.95L235.4 187.2C231.9 194.3 225.1 199.3 217.3 200.5L98.98 217.9 184.9 303C190.4 308.5 192.9 316.4 191.6 324.1L171.4 443.7l105.2-56.2C283.7 383.7 292.2 383.7 299.2 387.5l105.2 56.2-20.2-119.6C382.9 316.4 385.5 308.5 391 303l85.9-85.1-118.3-17.4C350.7 199.3 343.9 194.3 340.5 187.2L287.9 78.95z"/></svg></span></div><div class=grow>Important</div></div><div class="admonition-content mt-3 text-base leading-relaxed text-inherit"><p>Never use a CSS <code>display:none</code> trick to hide the pixel. Several email clients do not load hidden images at all, defeating the entire purpose. Use <code>width="1" height="1"</code> with an explicit style instead.</p></div></div><h2 class="relative group">Email Client Reality: Image Blocking<div id=email-client-reality-image-blocking class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#email-client-reality-image-blocking aria-label=Anchor>#</a></span></h2><p>Tracking pixels are not reliable open indicators. Most major email clients block remote image loading by default.</p><table><thead><tr><th>Client</th><th>Default image loading</th><th>Notes</th></tr></thead><tbody><tr><td>Gmail (web)</td><td>Blocked, proxied via Google</td><td>Opens are proxied; IP is Google&rsquo;s data center, not recipient</td></tr><tr><td>Outlook (desktop)</td><td>Blocked by default</td><td>User must click &ldquo;Download pictures&rdquo;</td></tr><tr><td>Apple Mail (iOS/macOS 15+)</td><td>Pre-fetched by Apple</td><td>Apple Mail Privacy Protection fetches images on behalf of the user, even if they never open the email</td></tr><tr><td>Outlook.com (web)</td><td>Blocked by default</td><td>Renders through Microsoft proxy when allowed</td></tr><tr><td>Thunderbird</td><td>Blocked by default</td><td>User-controlled per-message</td></tr></tbody></table><p>The practical implication: tracking pixels capture roughly 40-60% of actual opens in a typical B2B email list. Apple Mail Privacy Protection (AMPP), introduced in iOS 15 and macOS Monterey, actively breaks open tracking for Apple users by pre-loading all remote images immediately on delivery. This inflates open rates for Apple Mail users while making them meaningless as engagement signals.</p><div class="admonition relative overflow-hidden rounded-lg border-l-4 my-3 px-4 py-3 shadow-sm" data-type=warning><div class="flex items-center gap-2 font-semibold text-inherit"><div class="flex shrink-0 h-5 w-5 items-center justify-center text-lg"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417 293 53c-16.33-28-57.54-28-73.98.0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6c32.76.0 53.26-35 36.96-63zM232 168c0-13.25 10.75-24 24-24s24 10.8 24 24v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zm24 248c-17.36.0-31.44-14.08-31.44-31.44s14.07-31.44 31.44-31.44 31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg></span></div><div class=grow>Warning</div></div><div class="admonition-content mt-3 text-base leading-relaxed text-inherit"><p>Do not use open rates as a primary metric for email campaign decisions. Use click-through rates (UTM-tagged links) instead &ndash; those are unaffected by image blocking and provide a much stronger signal of intent.</p></div></div><h2 class="relative group">GDPR Compliance<div id=gdpr-compliance class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#gdpr-compliance aria-label=Anchor>#</a></span></h2><p>Tracking pixels collect personal data: the timestamp of an open event linked to an email address, plus the IP address and user agent of the device that loaded the image. Under GDPR Article 4, this is personal data. Processing it requires a lawful basis.</p><div class="tab__container w-full"><div class=tab__nav role=tablist><div class="flex flex-wrap gap-1"><button class="tab__button px-3 py-2 text-sm font-semibold border-b-2 border-transparent rounded-t-md hover:bg-neutral-200 dark:hover:bg-neutral-700 tab--active" role=tab aria-selected=true data-tab-index=0 data-tab-label>
<span class="flex items-center gap-1"></span></button><button class="tab__button px-3 py-2 text-sm font-semibold border-b-2 border-transparent rounded-t-md hover:bg-neutral-200 dark:hover:bg-neutral-700" role=tab aria-selected=false data-tab-index=1 data-tab-label>
<span class="flex items-center gap-1"></span></button></div></div><div class="tab__content mt-4"><div class="tab__panel tab--active" data-tab-index=0><p><strong>Applicable for:</strong> transactional emails (receipts, delivery confirmations, password resets) where tracking whether the email was received is a legitimate operational need.</p><p><strong>Requirements:</strong> document the legitimate interest assessment (LIA), ensure tracking is proportionate (not used for profiling), provide clear disclosure in your privacy policy, and honor opt-out requests.</p><p><strong>Not applicable for:</strong> marketing emails where the primary purpose is measuring campaign engagement.</p></div><div class=tab__panel data-tab-index=1><p><strong>Applicable for:</strong> marketing emails and any situation where legitimate interest does not apply.</p><p><strong>Requirements:</strong> obtain explicit, informed consent before sending tracked emails. The consent must be specific to tracking (not bundled with general terms of service acceptance). Maintain an audit trail of consent.</p><p><strong>Practical implementation:</strong> include a preference center where subscribers can opt out of tracking while still receiving emails.</p></div></div></div><p>Minimum privacy policy disclosure:</p><blockquote><p>We use tracking pixels in our emails to measure whether emails are opened and to collect the date, time, and device type of the open event. This data is used to [specific purpose]. You can opt out of email tracking by [specific mechanism &ndash; e.g., disabling image loading in your email client, or updating your preferences at this link].</p></blockquote><h2 class="relative group">Production Considerations<div id=production-considerations class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#production-considerations aria-label=Anchor>#</a></span></h2><p><strong>CDN for the pixel server.</strong> If you send millions of emails and 40% of recipients open them within the first hour, your pixel server will receive a spike of hundreds of thousands of requests within minutes of send time. Put the pixel server behind a CDN (CloudFront, Fastly) or a load balancer with horizontal scaling. The handler itself is stateless read from a database, which is easy to scale.</p><p><strong>Database instead of in-memory store.</strong> The <code>Store</code> implementation above loses all data on restart. In production, use a database. PostgreSQL with a simple <code>email_opens</code> table and a <code>uuid</code> primary key is sufficient. For very high volume, Redis with <code>INCR</code> and <code>SETNX</code> provides sub-millisecond write latency.</p><p><strong>UUID collision probability.</strong> A UUID v4 is 122 bits of entropy. The probability of collision in 10^12 (one trillion) generated UUIDs is approximately 10^-13. For email tracking at any realistic scale, collisions are not a practical concern. Use <code>crypto/rand</code> (as shown above), not <code>math/rand</code>.</p><p><strong>Deduplication for multiple opens.</strong> A single user opening an email five times generates five pixel requests. Your analytics should distinguish &ldquo;unique opens&rdquo; (first open per UUID) from &ldquo;total opens&rdquo; (sum of all open events per UUID). The <code>TrackingRecord</code> struct above tracks both via <code>FirstOpenAt</code> and <code>OpenCount</code>.</p><p><strong>Bot traffic.</strong> Email security gateways (Proofpoint, Mimecast, Barracuda) scan email links and images before delivery to check for malware. This pre-scanning triggers your tracking pixel before any human sees the email. Identify bot opens by checking whether the user agent matches known scanner patterns and filtering them from your analytics.</p><div id=accordion-1fa4afd49b862b1e43985062cedbb8e3 class="border border-neutral-200 dark:border-neutral-700 rounded-lg overflow-hidden" data-accordion=collapse data-accordion-separated=false>**http.ListenAndServe inside a handler.** The most common Go beginner mistake with HTTP servers: calling `http.ListenAndServe` inside a handler function means it only runs when a request is received, blocking the handler indefinitely and never accepting new connections. Always call `http.ListenAndServe` (or the equivalent) at the top level of `main`.
**Serving the same pixel URL to all recipients.** Without a unique UUID per send, you can count total opens but cannot attribute them to individuals, deduplicate, or correlate with your CRM. The URL scheme `/pixel/{uuid}.png` is the minimum required.
**Returning 404 for unknown UUIDs.** Some email clients (and security scanners) retry 404 responses repeatedly, flooding your server. Always return 200 with the pixel bytes, even for unrecognized UUIDs. Log the unknown UUID for investigation but do not punish the client.
**Not setting Cache-Control headers.** Without `Cache-Control: no-cache, no-store, must-revalidate`, some clients cache the pixel image and never re-request it on subsequent opens, causing you to miss open events after the first one.
**Ignoring Apple Mail Privacy Protection.** Post-iOS 15, Apple pre-fetches all email images immediately on delivery, from Apple's servers. This means every email sent to an Apple Mail user will show as "opened" within seconds, even if the user never reads it. Treat Apple Mail opens as "delivered" signals rather than "read" signals.</div><style>#accordion-1fa4afd49b862b1e43985062cedbb8e3>details+details{border-top:1px solid rgb(var(--color-neutral-200))}.dark #accordion-1fa4afd49b862b1e43985062cedbb8e3>details+details{border-top-color:rgb(var(--color-neutral-700))}</style><script>(()=>{const e=document.getElementById("accordion-1fa4afd49b862b1e43985062cedbb8e3");if(!e)return;const t=e.querySelectorAll("details[data-accordion-item]");t.forEach(e=>{e.addEventListener("toggle",()=>{if(!e.open)return;t.forEach(t=>{t!==e&&t.removeAttribute("open")})})})})()</script><hr><p>If you want to go deeper on any of this, I offer 1:1 coaching sessions for engineers working on AI integration, cloud architecture, and platform engineering. <a href=https://calendly.com/manuelfedele/60min target=_blank rel=noreferrer>Book a session</a> (50 EUR / 60 min) or reach out at <a href=mailto:manuel.fedele+website@gmail.com>manuel.fedele+website@gmail.com</a>.</p></div><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/evaluate-chess-position-with-golang/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Communicating with Stockfish from Go: The UCI Protocol</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-19T21:33:41+01:00>19 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/chess/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Chess
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/stockfish/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Stockfish
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/uci/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">UCI</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1579548122080-c35fd6820ecb?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/the-memoization-technique/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Memoization in Go: Caching Expensive Computations Correctly</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-16T21:07:26+01:00>16 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/trading-with-alpaca-and-golang/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Algorithmic Trading with Alpaca and Go: Paper Trading and Real-Time Data</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-15T19:24:09+01:00>15 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/alpaca/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Alpaca
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/trading/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Trading
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/finance/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Finance</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src="https://images.unsplash.com/photo-1534972195531-d756b9bfa9f2?w=1200&amp;q=85" role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/unit-testing-in-golang/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Testing in Go: From Unit Tests to Mocks and Benchmarks</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-01-09T20:49:03+01:00>9 January 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">8 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/testing/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Testing
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/golang/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Golang</span></span></a></div></div></div><div class="px-6 pt-4 pb-2"></div></article></section></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/evaluate-chess-position-with-golang/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Communicating with Stockfish from Go: The UCI Protocol
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-01-19T21:33:41+01:00>19 January 2023</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/socket-messaging-with-golang/><span class=leading-6>Real-Time Communication in Go: TCP Sockets, Message Framing, and WebSockets&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-01-29T18:44:12+01:00>29 January 2023</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
Manuel Fedele</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://manuelfedele.github.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>