<!doctype html><html lang=en><head><title>Create a Telegram Bot With Rust ::
Git Push and Run — A simple blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Install Rust # Before you can start writing Rust code, you&amp;rsquo;ll need to install the Rust programming language on your computer. You can do this by following the instructions on the Rust website (https://www.rust-lang.org/tools/install).
Set up a new Rust project # Once you have Rust installed, you&amp;rsquo;ll need to create a new Rust project using the cargo command-line tool. Open a terminal and navigate to the directory where you want to store your project, then run the following command: cargo new telegram-bot &amp;ndash;bin."><meta name=keywords content="software-engineering,go,python"><meta name=robots content="noodp"><link rel=canonical href=https://manuelfedele.github.io/posts/create-a-telegram-bot-with-rust/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://manuelfedele.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://manuelfedele.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://manuelfedele.github.io/img/favicon.png><link href=/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Create a Telegram Bot With Rust"><meta name=twitter:description content="Install Rust # Before you can start writing Rust code, you&rsquo;ll need to install the Rust programming language on your computer. You can do this by following the instructions on the Rust website (https://www.rust-lang.org/tools/install).
Set up a new Rust project # Once you have Rust installed, you&rsquo;ll need to create a new Rust project using the cargo command-line tool. Open a terminal and navigate to the directory where you want to store your project, then run the following command: cargo new telegram-bot &ndash;bin."><meta property="og:title" content="Create a Telegram Bot With Rust"><meta property="og:description" content="Install Rust # Before you can start writing Rust code, you&rsquo;ll need to install the Rust programming language on your computer. You can do this by following the instructions on the Rust website (https://www.rust-lang.org/tools/install).
Set up a new Rust project # Once you have Rust installed, you&rsquo;ll need to create a new Rust project using the cargo command-line tool. Open a terminal and navigate to the directory where you want to store your project, then run the following command: cargo new telegram-bot &ndash;bin."><meta property="og:type" content="article"><meta property="og:url" content="https://manuelfedele.github.io/posts/create-a-telegram-bot-with-rust/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-31T14:26:23+01:00"><meta property="article:modified_time" content="2022-12-31T14:26:23+01:00"><meta property="og:site_name" content="Git Push and Run"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Git Push and Run</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>Home</a></li><li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>Home</a></li><li><a href=/about>About</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><article class=post><h1 class=post-title>Create a Telegram Bot With Rust</h1><div class=post-meta><time class=post-date>2022-12-31</time>
<span class=post-read-time>— 4 min read</span></div><span class=post-tags><a href=https://manuelfedele.github.io/tags/rust/>#rust</a>&nbsp;
<a href=https://manuelfedele.github.io/tags/telegram/>#telegram</a>&nbsp;</span><div class=post-content><h2>Table of Contents</h2><aside class=table-of-contents><nav id=TableOfContents><ul><li><a href=#install-rust>Install Rust</a></li><li><a href=#set-up-a-new-rust-project>Set up a new Rust project</a></li><li><a href=#add-dependencies>Add dependencies</a></li><li><a href=#set-up-a-bot>Set up a bot</a></li><li><a href=#create-a-function-to-send-requests>Create a function to send requests</a></li><li><a href=#write-your-bot-logic>Write your bot logic</a></li><li><a href=#process-the-updates>Process the updates</a></li></ul></nav></aside><ol><li><h2 id=install-rust>Install Rust
<a href=#install-rust class=h-anchor aria-hidden=true>#</a></h2><p>Before you can start writing Rust code, you&rsquo;ll need to install the Rust programming language on your computer. You can do this by following the instructions on the Rust website (<a href=https://www.rust-lang.org/tools/install)>https://www.rust-lang.org/tools/install)</a>.</p></li><li><h2 id=set-up-a-new-rust-project>Set up a new Rust project
<a href=#set-up-a-new-rust-project class=h-anchor aria-hidden=true>#</a></h2><p>Once you have Rust installed, you&rsquo;ll need to create a new Rust project using the cargo command-line tool. Open a terminal and navigate to the directory where you want to store your project, then run the following command: cargo new telegram-bot &ndash;bin. This will create a new Rust project called &ldquo;telegram-bot&rdquo; with a binary crate (executable).</p></li><li><h2 id=add-dependencies>Add dependencies
<a href=#add-dependencies class=h-anchor aria-hidden=true>#</a></h2><p>In order to use the Telegram API and interact with the Telegram bot API, you&rsquo;ll need to add some dependencies to your project. You can do this by adding the following to your Cargo.toml file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>dependencies<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>reqwest <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;0.10.4&#34;</span>
</span></span><span style=display:flex><span>serde <span style=color:#f92672>=</span> <span style=color:#f92672>{</span> version <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1.0&#34;</span>, features <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;derive&#34;</span><span style=color:#f92672>]</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>serde_json <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1.0&#34;</span>
</span></span></code></pre></div></li><li><h2 id=set-up-a-bot>Set up a bot
<a href=#set-up-a-bot class=h-anchor aria-hidden=true>#</a></h2><p>In order to use the Telegram API, you&rsquo;ll need to set up a bot and get an API token. To do this, follow the instructions on the Telegram API documentation (<a href=https://core.telegram.org/bots/api#authorizing-your-bot)>https://core.telegram.org/bots/api#authorizing-your-bot)</a>.</p></li><li><h2 id=create-a-function-to-send-requests>Create a function to send requests
<a href=#create-a-function-to-send-requests class=h-anchor aria-hidden=true>#</a></h2><p>Once you have your API token, you can start interacting with the Telegram API by sending HTTP requests. To make it easier to send requests, you can create a function that takes care of all the details for you. Here&rsquo;s an example of how you might do this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::collections::HashMap;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> reqwest::Client;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>send_request</span>(
</span></span><span style=display:flex><span>    client: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Client</span>,
</span></span><span style=display:flex><span>    api_token: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>,
</span></span><span style=display:flex><span>    method: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>,
</span></span><span style=display:flex><span>    params: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>HashMap</span><span style=color:#f92672>&lt;&amp;</span><span style=color:#66d9ef>str</span>, <span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>) -&gt; Result<span style=color:#f92672>&lt;</span>serde_json::Value, reqwest::Error<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> url <span style=color:#f92672>=</span> String::new();
</span></span><span style=display:flex><span>    url.push_str(<span style=color:#e6db74>&#34;https://api.telegram.org/bot&#34;</span>);
</span></span><span style=display:flex><span>    url.push_str(api_token);
</span></span><span style=display:flex><span>    url.push_str(<span style=color:#e6db74>&#34;/&#34;</span>);
</span></span><span style=display:flex><span>    url.push_str(method);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> response <span style=color:#f92672>=</span> client.get(<span style=color:#f92672>&amp;</span>url).query(params).send()<span style=color:#f92672>?</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> json: <span style=color:#a6e22e>serde_json</span>::Value <span style=color:#f92672>=</span> response.json()<span style=color:#f92672>?</span>;
</span></span><span style=display:flex><span>    Ok(json)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This function takes a <code>reqwest::Client</code>, your API token, the name of the API method you want to call, and a HashMap of parameters. It constructs the URL for the API method, sends an HTTP GET request using reqwest, and returns the JSON response as a serde_json::Value.</p></li><li><h2 id=write-your-bot-logic>Write your bot logic
<a href=#write-your-bot-logic class=h-anchor aria-hidden=true>#</a></h2><p>Now that you have the basic infrastructure in place, you can start writing the logic for your bot. There are many ways you can do this, but a common approach is to use a loop that listens for updates from the Telegram API and then responds to them appropriately. Here&rsquo;s an example of how you might set this up:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::collections::HashMap;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Set up the client and API token
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> client <span style=color:#f92672>=</span> Client::new();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> api_token <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;YOUR_API_TOKEN_HERE&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Set the initial offset to 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> offset <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Set up a loop to listen for updates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>loop</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Set up the parameters for the getUpdates method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> params <span style=color:#f92672>=</span> HashMap::new();
</span></span><span style=display:flex><span>    params.insert(<span style=color:#e6db74>&#34;offset&#34;</span>, <span style=color:#f92672>&amp;</span>offset.to_string());
</span></span><span style=display:flex><span>    params.insert(<span style=color:#e6db74>&#34;timeout&#34;</span>, <span style=color:#e6db74>&#34;30&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Send the request and get the response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> response <span style=color:#f92672>=</span> send_request(<span style=color:#f92672>&amp;</span>client, <span style=color:#f92672>&amp;</span>api_token, <span style=color:#e6db74>&#34;getUpdates&#34;</span>, <span style=color:#f92672>&amp;</span>params)<span style=color:#f92672>?</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Check if there are any updates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> Some(updates) <span style=color:#f92672>=</span> response[<span style=color:#e6db74>&#34;result&#34;</span>].as_array() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Process each update
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> update <span style=color:#66d9ef>in</span> updates {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Increment the offset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            offset <span style=color:#f92672>=</span> update[<span style=color:#e6db74>&#34;update_id&#34;</span>].as_u64().unwrap() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Do something with the update here...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This code sets up a loop that sends a request to the getUpdates method of the Telegram API every 30 seconds. If there are any updates, it processes them one by one and increments the offset variable to keep track of which updates have been processed.</p></li><li><h2 id=process-the-updates>Process the updates
<a href=#process-the-updates class=h-anchor aria-hidden=true>#</a></h2><p>Inside the loop, you&rsquo;ll need to write code to process each update and decide how to respond to it. Here&rsquo;s an example of how you might do this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> Some(message) <span style=color:#f92672>=</span> update[<span style=color:#e6db74>&#34;message&#34;</span>].as_object() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get the chat ID and message text
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> chat_id <span style=color:#f92672>=</span> message[<span style=color:#e6db74>&#34;chat&#34;</span>][<span style=color:#e6db74>&#34;id&#34;</span>].as_i64().unwrap();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> text <span style=color:#f92672>=</span> message[<span style=color:#e6db74>&#34;text&#34;</span>].as_str().unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Check if the message is a command
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> text.starts_with(<span style=color:#e6db74>&#34;/&#34;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> command <span style=color:#f92672>=</span> text[<span style=color:#ae81ff>1</span><span style=color:#f92672>..</span>].split_whitespace().next().unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Handle the command here...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Send a message back to the chat
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> params <span style=color:#f92672>=</span> HashMap::new();
</span></span><span style=display:flex><span>        params.insert(<span style=color:#e6db74>&#34;chat_id&#34;</span>, <span style=color:#f92672>&amp;</span>chat_id.to_string());
</span></span><span style=display:flex><span>        params.insert(<span style=color:#e6db74>&#34;text&#34;</span>, <span style=color:#e6db74>&#34;You said: &#34;</span>);
</span></span><span style=display:flex><span>        params.insert(<span style=color:#e6db74>&#34;text&#34;</span>, text);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> _response <span style=color:#f92672>=</span> send_request(<span style=color:#f92672>&amp;</span>client, <span style=color:#f92672>&amp;</span>api_token, <span style=color:#e6db74>&#34;sendMessage&#34;</span>, <span style=color:#f92672>&amp;</span>params)<span style=color:#f92672>?</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This code checks if the update contains a message, gets the chat ID and message text, and then checks if the message is a command (i.e., starts with a /). If it&rsquo;s a command, you can handle it as you see fit. If it&rsquo;s not a command, the code sends a message back to the chat with the original message text.</p></li></ol><p>I hope this gives you a good starting point for developing your own Telegram bot using Rust!</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://manuelfedele.github.io/posts/create-webserver-with-fastapi-and-uvicorn/><span class=button__text>Create a Webserver With Fastapi and Uvicorn</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//manuelfedele-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Git Push and Run</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2023 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-K9P1DJX238"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K9P1DJX238",{anonymize_ip:!1})}</script></body></html>